<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport"/>
<title>The Continental</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
    /* Используем системные шрифты для лучшей совместимости */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    }

    /* Анимация "плавания" для логотипа */
    @keyframes float {
      0%, 100% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-10px);
      }
    }

    body {
      background-color: #000000;
      color: #ffffff;
      overflow-x: hidden;
      min-height: 100vh;
      padding-top: 50px;
      transition: all 0.3s ease;
    }

    /* Блокировка прокрутки при открытых фильтрах */
    body.filter-open {
      overflow: hidden;
      position: fixed;
      width: 100%;
    }

    /* Светлая тема */
    body[data-theme="light"] {
      background-color: #ffffff;
      color: #000000;
    }

    .top-bar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 50px;
      background: rgba(0, 0, 0, 0.7);
      color: #ffffff;
      display: flex;
      align-items: center;
      padding: 0 12px;
      z-index: 1000;
      box-shadow: none;
      border-bottom: none;
      gap: 8px;
      backdrop-filter: blur(10px);
      transition: background 0.3s ease, color 0.3s ease, border-bottom 0.3s ease;
    }

    body[data-theme="light"] .top-bar {
      background: #ffffff;
      color: #000000;
      border-bottom: none;
      box-shadow: none;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .language-select {
      background: rgba(128, 128, 128, 0.15);
      border: 1px solid rgba(128, 128, 128, 0.4);
      border-radius: 6px;
      padding: 4px 6px;
      color: inherit;
      font-size: 11px;
      min-width: 38px;
      font-weight: 500;
    }

    /* Уменьшенный поиск без иконки лупы */
    .search-container {
      flex: 1;
      max-width: 90px;
      background: rgba(128, 128, 128, 0.15);
      border: 1px solid rgba(128, 128, 128, 0.3);
      border-radius: 15px;
      padding: 5px 8px;
      display: flex;
      align-items: center;
      transition: all 0.3s ease;
    }

    .search-container:focus-within {
      background: rgba(128, 128, 128, 0.25);
      border-color: rgba(128, 128, 128, 0.5);
    }

    .search-input {
      background: transparent;
      border: none;
      outline: none;
      color: inherit;
      font-size: 11px;
      width: 100%;
      font-weight: 400;
    }

    .search-input::placeholder {
      color: rgba(128, 128, 128, 0.7);
    }

    /* Кнопка фильтров */
    .filters-button {
      background: rgba(128, 128, 128, 0.15);
      border: 1px solid rgba(128, 128, 128, 0.4);
      border-radius: 6px;
      padding: 5px 10px;
      color: inherit;
      font-size: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      user-select: none;
      display: none; /* Скрыто по умолчанию */
    }

    .filters-button:hover {
      background: rgba(128, 128, 128, 0.25);
      transform: translateY(-1px);
    }

    .filters-button:active {
      transform: translateY(0);
      background: rgba(128, 128, 128, 0.3);
    }

    /* Всплывающая панель фильтров справа */
    .filter-panel {
      position: fixed;
      top: 0;
      right: -100%;
      width: 300px;
      height: 100vh;
      background: #000000;
      color: #ffffff;
      z-index: 2000;
      transition: right 0.3s ease;
      padding: 20px; /* Уменьшаем общий padding */
      border-left: 1px solid rgba(128, 128, 128, 0.3);
      display: flex;
      flex-direction: column;
    }

    .filter-panel.show {
      right: 0;
    }

    .filter-panel-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1999;
      display: none;
    }

    .filter-panel-overlay.show {
      display: block;
    }

    .filter-panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px; /* Уменьшаем отступ */
      padding-bottom: 15px;
      border-bottom: 1px solid rgba(128, 128, 128, 0.3);
      flex-shrink: 0; /* Заголовок не сжимается */
    }

    #filter-content {
      flex-grow: 1; /* Содержимое занимает все доступное пространство */
      overflow-y: auto; /* Прокрутка только для содержимого */
      padding-right: 5px; /* Для компенсации скроллбара */
    }

    .filter-panel-title {
      font-size: 18px;
      font-weight: 600;
    }

    .filter-panel-close {
      background: none;
      border: none;
      color: inherit;
      font-size: 24px;
      cursor: pointer;
      padding: 5px;
      border-radius: 4px;
      transition: background 0.3s ease;
    }

    .filter-panel-close:hover {
      background: rgba(128, 128, 128, 0.2);
    }

    .filter-group {
      margin-bottom: 20px;
    }

    .filter-label {
      font-size: 14px;
      color: inherit;
      margin-bottom: 10px;
      display: block;
      font-weight: 600;
    }

    .filter-input-group {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }

    .filter-input {
      background: rgba(128, 128, 128, 0.1);
      border: 1px solid rgba(128, 128, 128, 0.3);
      border-radius: 6px;
      padding: 8px 10px;
      color: inherit;
      font-size: 12px;
      width: 80px;
      max-width: 80px;
    }

    .filter-checkbox-group {
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid rgba(128, 128, 128, 0.2);
      border-radius: 6px;
      padding: 10px;
    }

    .filter-checkbox {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      font-size: 12px;
    }

    .filter-checkbox:last-child {
      margin-bottom: 0;
    }

    .filter-checkbox input[type="checkbox"] {
      margin-right: 8px;
      width: 16px;
      height: 16px;
    }

    .filter-apply-btn {
      background: #007bff;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 12px 20px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      margin-top: 20px;
      transition: all 0.3s ease;
    }

    .filter-apply-btn:active {
      transform: scale(0.98);
      background: #0056b3;
    }

    .top-bar-right {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-left: auto;
    }

    .theme-toggle, .cart-button {
      background: rgba(128, 128, 128, 0.15);
      border: 1px solid rgba(128, 128, 128, 0.4);
      border-radius: 6px;
      padding: 5px 7px;
      cursor: pointer;
      color: inherit;
      font-size: 13px;
      transition: all 0.3s ease;
      position: relative;
      font-weight: 500;
    }

    .theme-toggle:hover, .cart-button:hover {
      background: rgba(128, 128, 128, 0.25);
      transform: translateY(-1px);
    }

    .theme-toggle:active, .cart-button:active {
      transform: translateY(0);
    }

    .cart-count {
      position: absolute;
      top: -4px;
      right: -4px;
      background: #ff4444;
      color: white;
      border-radius: 50%;
      width: 16px;
      height: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 9px;
      font-weight: bold;
      display: none;
    }

    /* Основной контейнер */
    .container {
      width: 100%;
      max-width: 100vw;
      padding: 0;
      position: relative;
    }

    .screen {
      display: none;
      padding: 15px;
      min-height: calc(100vh - 50px);
    }

    .screen.active {
      display: block;
    }

    /* Логотип с анимацией плавания */
    .logo {
      font-family: serif;
      font-size: 32px;
      font-weight: 700;
      text-align: center;
      margin: 20px 0 20px;
      background: linear-gradient(135deg, #ffffff 0%, #ffffff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: 2px;
      position: relative;
      animation: float 3s ease-in-out infinite;
    }

    body[data-theme="light"] .logo {
      background: linear-gradient(135deg, #000000 0%, #666666 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .logo::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 50px;
      height: 2px;
      background: linear-gradient(90deg, transparent, #ffffff, transparent);
    }

    body[data-theme="light"] .logo::after {
      background: linear-gradient(90deg, transparent, #000000, transparent);
    }

    /* Раздел новостей */
    .news-section {
      margin: 20px 0 30px;
      text-align: center;
    }

    .news-carousel {
      position: relative;
      overflow: hidden;
      border-radius: 12px;
      background: #1a1a1a;
      border: 1px solid rgba(128, 128, 128, 0.2);
      height: 120px;
    }

    body[data-theme="light"] .news-carousel {
      background: #f5f5f5;
    }

    .news-slides {
      display: flex;
      transition: transform 0.3s ease;
      height: 100%;
    }

    .news-slide {
      min-width: 100%;
      padding: 15px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    .news-slide h3 {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 8px;
      color: #ffffff;
    }

    body[data-theme="light"] .news-slide h3 {
      color: #000000;
    }

    .news-slide p {
      font-size: 12px;
      color: #999999;
      line-height: 1.4;
    }

    body[data-theme="light"] .news-slide p {
      color: #666666;
    }

    .news-indicators {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 10px;
    }

    .news-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(128, 128, 128, 0.4);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .news-indicator.active {
      background: #007bff;
      transform: scale(1.2);
    }

    /* Основные кнопки */
    .btn {
      background: #ffffff !important;
      color: #000000 !important;
      padding: 14px 20px;
      margin: 8px 0;
      border: none;
      font-weight: 600;
      font-size: 15px;
      width: 100%;
      text-align: center;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
    }

    body[data-theme="light"] .btn {
      background: #000000 !important;
      color: #ffffff !important;
    }

    .btn:active {
      transform: scale(0.98);
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
    }

    /* Кнопки социальных сетей */
    .social-btn {
      background: #ffffff !important;
      color: #000000 !important;
      padding: 12px 20px;
      margin: 6px 0;
      border: none;
      font-weight: 600;
      font-size: 14px;
      width: 100%;
      text-align: center;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    body[data-theme="light"] .social-btn {
      background: #000000 !important;
      color: #ffffff !important;
    }

    .social-btn:active {
      transform: scale(0.98);
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
    }

    /* Заголовки экранов */
    .header {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
      position: relative;
    }

    .back {
      position: absolute;
      left: 0;
      background: #1a1a1a;
      border: 1px solid rgba(128, 128, 128, 0.3);
      color: #ffffff;
      font-size: 18px;
      width: 36px;
      height: 36px;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    body[data-theme="light"] .back {
      background: #f5f5f5;
      color: #000000;
    }

    .back:active {
      transform: scale(0.95);
    }

    h1 {
      font-size: 20px;
      font-weight: 700;
      text-align: center;
      color: #ffffff;
    }

    body[data-theme="light"] h1 {
      color: #000000;
    }

    /* Товары */
    .product {
      background: #1a1a1a;
      border: 1px solid rgba(128, 128, 128, 0.2);
      padding: 15px;
      margin: 10px 0;
      border-radius: 12px;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    body[data-theme="light"] .product {
      background: #f5f5f5;
    }

    .product:active {
      transform: scale(0.98);
      background: rgba(128, 128, 128, 0.1);
    }

    .product-image {
      width: 100%;
      height: 120px;
      background: #333;
      border-radius: 8px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #666;
      font-size: 12px;
    }

    .product-name {
      font-weight: 600;
      font-size: 16px;
      margin-bottom: 5px;
      color: #ffffff;
    }

    body[data-theme="light"] .product-name {
      color: #000000;
    }

    .product-description {
      color: #999999;
      font-size: 13px;
      margin-bottom: 8px;
      line-height: 1.3;
    }

    body[data-theme="light"] .product-description {
      color: #666666;
    }

    .product-price {
      color: #ffffff;
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    body[data-theme="light"] .product-price {
      color: #000000;
    }

    .product-details {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      font-size: 11px;
      color: #999999;
    }

    body[data-theme="light"] .product-details {
      color: #666666;
    }

    .add-to-cart-btn {
      background: #007bff;
      color: white;
      padding: 8px 16px;
      border: none;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      transition: all 0.3s ease;
    }

    .add-to-cart-btn:active {
      transform: scale(0.98);
      background: #0056b3;
    }

    /* Пагинация */
    .pagination {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      margin: 20px 0;
      padding: 10px;
    }

    .pagination button {
      background: #1a1a1a;
      border: 1px solid rgba(128, 128, 128, 0.3);
      color: #ffffff;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.3s ease;
      min-width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    body[data-theme="light"] .pagination button {
      background: #f5f5f5;
      color: #000000;
    }

    .pagination button:hover {
      background: rgba(128, 128, 128, 0.2);
      transform: translateY(-1px);
    }

    .pagination button:active {
      transform: translateY(0);
    }

    .pagination button.active {
      background: #007bff;
      color: white;
      border-color: #007bff;
    }

    .pagination button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .pagination button:disabled:hover {
      transform: none;
    }

    /* Модальное окно для выбора товара */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      padding: 20px;
    }

    .modal.show {
      display: flex;
    }

    .modal-content {
      background: #000000;
      border: 1px solid rgba(128, 128, 128, 0.3);
      border-radius: 15px;
      padding: 25px;
      max-width: 400px;
      width: 100%;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      max-height: 80vh;
      overflow-y: auto;
    }

    body[data-theme="light"] .modal-content {
      background: #ffffff;
    }

    .modal-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 20px;
      text-align: center;
      color: #ffffff;
    }

    body[data-theme="light"] .modal-title {
      color: #000000;
    }

    .modal-group {
      margin-bottom: 18px;
    }

    .modal-label {
      font-size: 13px;
      color: #ffffff;
      margin-bottom: 6px;
      display: block;
      font-weight: 500;
    }

    body[data-theme="light"] .modal-label {
      color: #000000;
    }

    .modal-select, .modal-input {
      background: #1a1a1a;
      border: 1px solid rgba(128, 128, 128, 0.3);
      border-radius: 8px;
      padding: 10px;
      color: #ffffff;
      font-size: 15px;
      width: 100%;
    }

    body[data-theme="light"] .modal-select,
    body[data-theme="light"] .modal-input {
      background: #f5f5f5;
      color: #000000;
    }

    .modal-image-gallery {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      overflow-x: auto;
    }

    .modal-image {
      min-width: 80px;
      height: 80px;
      background: #333;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #666;
      font-size: 10px;
      cursor: pointer;
      border: 2px solid transparent;
      transition: all 0.3s ease;
    }

    .modal-image.active {
      border-color: #007bff;
    }

    .modal-description {
      background: #1a1a1a;
      border: 1px solid rgba(128, 128, 128, 0.3);
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 15px;
      font-size: 13px;
      line-height: 1.4;
      color: #ffffff;
    }

    body[data-theme="light"] .modal-description {
      background: #f5f5f5;
      color: #000000;
    }

    .modal-buttons {
      display: flex;
      gap: 12px;
      margin-top: 25px;
    }

    .modal-btn {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .modal-btn.cancel {
      background: transparent;
      color: inherit;
      border: 1px solid rgba(128, 128, 128, 0.4);
    }

    .modal-btn.confirm {
      background: #007bff;
      color: white;
    }

    .modal-btn:active {
      transform: scale(0.98);
    }

    /* Корзина */
    .cart-item {
      background: #1a1a1a;
      border: 1px solid rgba(128, 128, 128, 0.2);
      padding: 15px;
      margin: 10px 0;
      border-radius: 12px;
    }

    body[data-theme="light"] .cart-item {
      background: #f5f5f5;
    }

    .cart-total {
      background: #1a1a1a;
      border: 1px solid rgba(128, 128, 128, 0.2);
      padding: 20px;
      margin: 20px 0;
      border-radius: 12px;
      text-align: center;
    }

    body[data-theme="light"] .cart-total {
      background: #f5f5f5;
    }

    .checkout-btn {
      background: #28a745;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      transition: all 0.3s ease;
    }

    .checkout-btn:active {
      transform: scale(0.98);
      background: #1e7e34;
    }

    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: #999999;
      font-size: 16px;
    }

    body[data-theme="light"] .empty-state {
      color: #666666;
    }

    /* Контент страниц */
    .content {
      background: #1a1a1a;
      border: 1px solid rgba(128, 128, 128, 0.2);
      padding: 20px;
      margin: 10px 0;
      border-radius: 12px;
      line-height: 1.6;
    }

    body[data-theme="light"] .content {
      background: #f5f5f5;
    }

    .content h2 {
      color: #ffffff;
      margin-bottom: 15px;
    }

    body[data-theme="light"] .content h2 {
      color: #000000;
    }

    .content p {
      color: #cccccc;
      margin-bottom: 10px;
    }

    body[data-theme="light"] .content p {
      color: #333333;
    }

    .contact-btn {
      background: #ffffff !important;
      color: #000000 !important;
      padding: 14px 20px;
      margin: 8px 0;
      border: none;
      font-weight: 600;
      font-size: 15px;
      width: 100%;
      text-align: center;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
    }

    body[data-theme="light"] .contact-btn {
      background: #000000 !important;
      color: #ffffff !important;
    }

    .contact-btn:active {
      transform: scale(0.98);
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
    }

    .social-text {
      text-align: center;
      margin-bottom: 20px;
      color: #cccccc;
      font-size: 14px;
      line-height: 1.5;
    }

    body[data-theme="light"] .social-text {
      color: #333333;
    }

    /* Экран детального просмотра товара */
    .product-detail-screen {
      padding: 15px;
      min-height: calc(100vh - 50px);
    }

    .product-detail-images {
      margin-bottom: 20px;
    }

    .product-main-image {
      width: 100%;
      height: 300px;
      background: #333;
      border-radius: 12px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #666;
      font-size: 14px;
    }

    .product-thumbnail-gallery {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding: 5px 0;
    }

    .product-thumbnail {
      min-width: 60px;
      height: 60px;
      background: #333;
      border-radius: 8px;
      cursor: pointer;
      border: 2px solid transparent;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #666;
      font-size: 10px;
    }

    .product-thumbnail.active {
      border-color: #007bff;
    }

    .product-detail-info {
      background: #1a1a1a;
      border: 1px solid rgba(128, 128, 128, 0.2);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 15px;
    }

    body[data-theme="light"] .product-detail-info {
      background: #f5f5f5;
    }

    .product-detail-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 10px;
      color: #ffffff;
    }

    body[data-theme="light"] .product-detail-title {
      color: #000000;
    }

    .product-detail-price {
      font-size: 28px;
      font-weight: 700;
      color: #007bff;
      margin-bottom: 15px;
    }

    .product-detail-description {
      font-size: 16px;
      line-height: 1.6;
      color: #cccccc;
      margin-bottom: 20px;
    }

    body[data-theme="light"] .product-detail-description {
      color: #333333;
    }

    .product-detail-options {
      background: #1a1a1a;
      border: 1px solid rgba(128, 128, 128, 0.2);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 15px;
    }

    body[data-theme="light"] .product-detail-options {
      background: #f5f5f5;
    }

    .product-option-group {
      margin-bottom: 20px;
    }

    .product-option-group:last-child {
      margin-bottom: 0;
    }

    .product-option-label {
      font-size: 16px;
      font-weight: 600;
      color: #ffffff;
      margin-bottom: 10px;
      display: block;
    }

    body[data-theme="light"] .product-option-label {
      color: #000000;
    }

    .product-option-select {
      width: 100%;
      background: rgba(128, 128, 128, 0.1);
      border: 1px solid rgba(128, 128, 128, 0.3);
      border-radius: 8px;
      padding: 12px;
      color: inherit;
      font-size: 16px;
    }

    .product-quantity-controls {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .quantity-btn {
      background: #007bff;
      color: white;
      border: none;
      border-radius: 8px;
      width: 40px;
      height: 40px;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .quantity-btn:active {
      transform: scale(0.95);
      background: #0056b3;
    }

    .quantity-display {
      font-size: 18px;
      font-weight: 600;
      min-width: 40px;
      text-align: center;
    }

    .product-detail-actions {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .product-action-btn {
      flex: 1;
      padding: 15px;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .product-action-btn.primary {
      background: #007bff;
      color: white;
    }

    .product-action-btn.secondary {
      background: transparent;
      color: inherit;
      border: 1px solid rgba(128, 128, 128, 0.4);
    }

    .product-action-btn:active {
      transform: scale(0.98);
    }

    /* Админ панель для управления товарами */
    .admin-panel {
      position: fixed;
      top: 60px;
      right: 20px;
      background: #1a1a1a;
      border: 1px solid rgba(128, 128, 128, 0.3);
      border-radius: 12px;
      padding: 15px;
      z-index: 1000;
      display: none;
    }

    body[data-theme="light"] .admin-panel {
      background: #f5f5f5;
    }

    .admin-btn {
      background: #28a745;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 8px 12px;
      font-size: 12px;
      cursor: pointer;
      margin: 2px;
      transition: all 0.3s ease;
    }

    .admin-btn.delete {
      background: #dc3545;
    }

    .admin-btn:active {
      transform: scale(0.95);
    }
</style>
</head>

<body data-theme="dark">
  <!-- Верхняя панель -->
  <div class="top-bar">
    <select class="language-select" id="language-select">
      <option value="ru">RU</option>
      <option value="en">EN</option>
      <option value="uk">UA</option>
      <option value="de">DE</option>
    </select>
    
    <div class="search-container">
      <input type="text" class="search-input" id="search-input" placeholder="Поиск..." data-key="search_placeholder">
    </div>
    
    <button class="filters-button" id="filters-button" data-key="filter_btn">ФИЛЬТР</button>
    
    <div class="top-bar-right">
      <button class="theme-toggle" id="theme-toggle">🌙</button>
      <button class="cart-button" id="cart-button">
        🛒
        <span class="cart-count" id="cart-count">0</span>
      </button>
    </div>
  </div>

  <!-- Всплывающая панель фильтров -->
  <div class="filter-panel-overlay" id="filter-panel-overlay"></div>
  <div class="filter-panel" id="filter-panel">
    <div class="filter-panel-header">
      <div class="filter-panel-title" data-key="filter_title">Фильтры</div>
      <button class="filter-panel-close" id="filter-panel-close">×</button>
    </div>
    <div id="filter-content">
      <!-- Содержимое фильтров будет добавлено динамически -->
    </div>
  </div>

  <div class="container">
    <!-- Главный экран -->
    <div class="screen active" id="home">
      <div class="logo" data-key="logo">The Continental</div>
      
      <!-- Раздел новостей -->
      <div class="news-section">
        <div class="news-carousel">
          <div class="news-slides" id="news-slides">
            <div class="news-slide">
              <h3 data-key="news1_title">Новая коллекция весна-лето 2025</h3>
              <p data-key="news1_text">Эксклюзивные модели от ведущих брендов уже в наличии. Ограниченная серия!</p>
            </div>
            <div class="news-slide">
              <h3 data-key="news2_title">Скидки до 30% на аксессуары</h3>
              <p data-key="news2_text">Специальное предложение на все аксессуары. Акция действует до конца месяца.</p>
            </div>
            <div class="news-slide">
              <h3 data-key="news3_title">Быстрая доставка по Европе</h3>
              <p data-key="news3_text">Теперь доставляем заказы еще быстрее - от 5 до 10 рабочих дней.</p>
            </div>
          </div>
        </div>
        <div class="news-indicators">
          <div class="news-indicator active" onclick="goToSlide(0)"></div>
          <div class="news-indicator" onclick="goToSlide(1)"></div>
          <div class="news-indicator" onclick="goToSlide(2)"></div>
        </div>
      </div>

      <button class="btn" onclick="openScreen('mens')" data-key="mens_btn">Мужское</button>
      <button class="btn" onclick="openScreen('womens')" data-key="womens_btn">Женское</button>
      <button class="btn" onclick="openScreen('terms')" data-key="terms_btn">Условия работы</button>
      <button class="btn" onclick="openScreen('support')" data-key="support_btn">Поддержка</button>
      <button class="btn" onclick="openScreen('social')" data-key="social_btn">Мы в соцсетях</button>
    </div>

    <!-- Мужские товары -->
    <div class="screen" id="mens">
      <div class="header">
        <button class="back" onclick="backToHome()">←</button>
        <h1 data-key="mens_title">Мужское</h1>
      </div>
      <div id="mens-content"></div>
      <div class="pagination" id="mens-pagination"></div>
    </div>

    <!-- Женские товары -->
    <div class="screen" id="womens">
      <div class="header">
        <button class="back" onclick="backToHome()">←</button>
        <h1 data-key="womens_title">Женское</h1>
      </div>
      <div id="womens-content"></div>
      <div class="pagination" id="womens-pagination"></div>
    </div>

    <!-- Социальные сети -->
    <div class="screen" id="social">
      <div class="header">
        <button class="back" onclick="backToHome()">←</button>
        <h1 data-key="social_title">Мы в соцсетях</h1>
      </div>
      <div class="social-text" data-key="social_text">
        Подписывайтесь на наши социальные сети, чтобы быть в курсе всех новинок и специальных предложений!
      </div>
      <button class="social-btn" onclick="openSocialLink('https://instagram.com/continental_shop')" data-key="instagram_btn">📷 Instagram</button>
      <button class="social-btn" onclick="openSocialLink('https://tiktok.com/@continental_shop')" data-key="tiktok_btn">🎵 TikTok</button>
      <button class="social-btn" onclick="openSocialLink('https://wa.me/1234567890')" data-key="whatsapp_btn">💬 WhatsApp</button>
      <button class="social-btn" onclick="openSocialLink('viber://chat?number=1234567890')" data-key="viber_btn">📞 Viber</button>
      <button class="social-btn" onclick="openSocialLink('https://t.me/continental_shop')" data-key="telegram_btn">✈️ Telegram</button>
    </div>

    <!-- Корзина -->
    <div class="screen" id="cart">
      <div class="header">
        <button class="back" onclick="backToHome()">←</button>
        <h1 data-key="cart_title">Корзина</h1>
      </div>
      <div id="cart-content"></div>
      <div class="cart-total" id="cart-total" style="display: none;">
        <div style="font-size: 18px; font-weight: 600; margin-bottom: 15px;">
          <span data-key="cart_total_label">Итого:</span> <span id="total-price">€0.00</span>
        </div>
        <button class="checkout-btn" onclick="checkout()" data-key="checkout_btn">Оформить заказ</button>
      </div>
    </div>

    <!-- Условия работы -->
    <div class="screen" id="terms">
      <div class="header">
        <button class="back" onclick="backToHome()">←</button>
        <h1 data-key="terms_title">Условия работы</h1>
      </div>
      <div class="content" data-key="terms_content">
        <p><strong>Добро пожаловать в The Continental!</strong></p>
        <p>Мы предлагаем только премиум-реплики высочайшего качества. Каждый товар проходит строгий контроль качества перед отправкой.</p>
        <p><strong>Условия заказа:</strong></p>
        <p>• Оплата — 100% предоплата<br/>• Доставка по Европе — 7-14 рабочих дней<br/>• Возвратов и обменов нет<br/>• Гарантия качества на все товары</p>
        <p>Мы работаем только с проверенными поставщиками и гарантируем соответствие товара описанию.</p>
      </div>
    </div>

    <!-- Поддержка -->
    <div class="screen" id="support">
      <div class="header">
        <button class="back" onclick="backToHome()">←</button>
        <h1 data-key="support_title">Поддержка</h1>
      </div>
      <div class="content">
        <p data-key="support_text">Наши менеджеры готовы ответить на все ваши вопросы и помочь с выбором товара. Мы работаем 24/7 для вашего удобства.</p>
        <button class="contact-btn" onclick="openSocialLink('https://t.me/a6tribunal')" data-key="contact_manager_btn">НАПИСАТЬ МЕНЕДЖЕРУ</button>
      </div>
    </div>

    <!-- Детальный просмотр товара -->
    <div class="screen product-detail-screen" id="product-detail">
      <div class="header">
        <button class="back" onclick="backFromProductDetail()">←</button>
        <h1 id="product-detail-header-title">Товар</h1>
      </div>
      
      <div class="product-detail-images">
        <div class="product-main-image" id="product-main-image">
          Основное изображение
        </div>
        <div class="product-thumbnail-gallery" id="product-thumbnail-gallery">
          <!-- Миниатюры будут добавлены динамически -->
        </div>
      </div>
      
      <div class="product-detail-info">
        <div class="product-detail-title" id="product-detail-title">Название товара</div>
        <div class="product-detail-price" id="product-detail-price">€0.00</div>
        <div class="product-detail-description" id="product-detail-description">
          Описание товара
        </div>
      </div>
      
      <div class="product-detail-options">
        <div class="product-option-group">
          <label class="product-option-label" data-key="modal_size_label">Размер</label>
          <select class="product-option-select" id="product-detail-size">
            <!-- Опции будут добавлены динамически -->
          </select>
        </div>
        
        <div class="product-option-group">
          <label class="product-option-label" data-key="modal_color_label">Цвет</label>
          <select class="product-option-select" id="product-detail-color">
            <!-- Опции будут добавлены динамически -->
          </select>
        </div>
        
        <div class="product-option-group">
          <label class="product-option-label" data-key="modal_quantity_label">Количество</label>
          <div class="product-quantity-controls">
            <button class="quantity-btn" onclick="changeProductQuantity(-1)">-</button>
            <div class="quantity-display" id="product-detail-quantity">1</div>
            <button class="quantity-btn" onclick="changeProductQuantity(1)">+</button>
          </div>
        </div>
      </div>
      
      <div class="product-detail-actions">
        <button class="product-action-btn secondary" onclick="backFromProductDetail()" data-key="modal_cancel_btn">Назад</button>
        <button class="product-action-btn primary" onclick="addToCartFromDetail()" data-key="modal_add_btn">Добавить в корзину</button>
      </div>
    </div>
  </div>

  <!-- Админ панель -->
  <div class="admin-panel" id="admin-panel">
    <button class="admin-btn" onclick="showAddProductForm()">Добавить товар</button>
    <button class="admin-btn delete" onclick="toggleDeleteMode()">Удалить товары</button>
    <button class="admin-btn" onclick="hideAdminPanel()">Закрыть</button>
  </div>

  <!-- Модальное окно товара -->
  <div class="modal" id="product-modal">
    <div class="modal-content">
      <div class="modal-title" id="modal-title">Название товара</div>
      
      <div class="modal-group">
        <div class="modal-label" data-key="modal_images_label">Изображения</div>
        <div class="modal-image-gallery" id="modal-image-gallery"></div>
      </div>
      
      <div class="modal-group">
        <div class="modal-label" data-key="modal_description_label">Описание</div>
        <div class="modal-description" id="modal-description"></div>
      </div>
      
      <div class="modal-group">
        <div class="modal-label" data-key="modal_size_label">Размер</div>
        <select class="modal-select" id="modal-size"></select>
      </div>
      
      <div class="modal-group">
        <div class="modal-label" data-key="modal_color_label">Цвет</div>
        <select class="modal-select" id="modal-color"></select>
      </div>
      
      <div class="modal-group">
        <div class="modal-label" data-key="modal_quantity_label">Количество</div>
        <input type="number" class="modal-input" id="modal-quantity" value="1" min="1">
      </div>
      
      <div class="modal-buttons">
        <button class="modal-btn cancel" onclick="closeModal()" data-key="modal_cancel_btn">Отмена</button>
        <button class="modal-btn confirm" onclick="confirmAddToCart()" data-key="modal_add_btn">Добавить</button>
      </div>
    </div>
  </div>



<script>
// Глобальные переменные
let currentLanguage = 'ru';
let currentTheme = 'dark';
let currentScreen = 'home';
let currentGender = '';
let currentPage = 1;
let itemsPerPage = 6;
let cart = [];
let currentSlide = 0;
let slideInterval;
let currentProduct = null;

// Данные товаров
const products = {
  mens: [
    {
      id: 1,
      name: "Мужская футболка Premium",
      description: "Высококачественная мужская футболка из премиальных материалов",
      price: 50.28,
      brand: "Jordan",
      stock: 10,
      category: "tshirts",
      subcategory: "tshirt",
      colors: ["black", "white", "gray"],
      sizes: ["S", "M", "L", "XL", "XXL"],
      images: ["image1.jpg", "image2.jpg"],
      fullDescription: "Эта премиальная футболка изготовлена из высококачественного хлопка с добавлением эластана для комфорта. Идеально подходит для повседневной носки и спорта."
    },
    {
      id: 2,
      name: "Мужская футболка Sport",
      description: "Спортивная мужская футболка для активного образа жизни",
      price: 45.99,
      brand: "Adidas",
      stock: 15,
      category: "tshirts",
      subcategory: "tshirt",
      colors: ["blue", "red", "black"],
      sizes: ["S", "M", "L", "XL"],
      images: ["image3.jpg"],
      fullDescription: "Спортивная футболка с технологией отвода влаги. Отлично подходит для тренировок и активного отдыха."
    },
    {
      id: 3,
      name: "Мужская футболка Oversize",
      description: "Стильная оверсайз футболка для современного образа",
      price: 55.00,
      brand: "Nike",
      stock: 8,
      category: "tshirts",
      subcategory: "oversize",
      colors: ["black", "white", "beige"],
      sizes: ["M", "L", "XL", "XXL"],
      images: ["image4.jpg", "image5.jpg"],
      fullDescription: "Модная оверсайз футболка свободного кроя. Изготовлена из мягкого хлопка высокого качества."
    },
    {
      id: 4,
      name: "Мужское худи Premium",
      description: "Теплое и стильное худи для прохладной погоды",
      price: 89.99,
      brand: "Supreme",
      stock: 5,
      category: "hoodies",
      subcategory: "hoodie",
      colors: ["black", "gray", "navy"],
      sizes: ["S", "M", "L", "XL"],
      images: ["image6.jpg"],
      fullDescription: "Премиальное худи с капюшоном и карманом-кенгуру. Изготовлено из плотного хлопка с начесом."
    },
    {
      id: 5,
      name: "Мужские джинсы Slim",
      description: "Классические джинсы слим фит",
      price: 75.50,
      brand: "Levi's",
      stock: 12,
      category: "pants",
      subcategory: "slim_fit",
      colors: ["blue", "black", "gray"],
      sizes: ["30", "32", "34", "36", "38"],
      images: ["image7.jpg", "image8.jpg"],
      fullDescription: "Классические джинсы слим фит из качественного денима. Идеально сидят по фигуре."
    },
    {
      id: 6,
      name: "Мужские кроссовки Sport",
      description: "Удобные спортивные кроссовки",
      price: 120.00,
      brand: "Nike",
      stock: 7,
      category: "shoes",
      subcategory: "sneakers",
      colors: ["white", "black", "blue"],
      sizes: ["40", "41", "42", "43", "44", "45"],
      images: ["image9.jpg"],
      fullDescription: "Современные спортивные кроссовки с амортизацией. Подходят для бега и повседневной носки."
    },
    {
      id: 7,
      name: "Мужская рубашка Classic",
      description: "Классическая мужская рубашка",
      price: 65.00,
      brand: "Hugo Boss",
      stock: 9,
      category: "tshirts",
      subcategory: "shirt",
      colors: ["white", "blue", "black"],
      sizes: ["S", "M", "L", "XL"],
      images: ["image10.jpg"],
      fullDescription: "Элегантная классическая рубашка для деловых встреч и особых случаев."
    },
    {
      id: 8,
      name: "Мужские шорты Summer",
      description: "Летние шорты для комфорта",
      price: 35.99,
      brand: "Puma",
      stock: 20,
      category: "shorts",
      subcategory: "sport",
      colors: ["black", "navy", "khaki"],
      sizes: ["S", "M", "L", "XL"],
      images: ["image11.jpg"],
      fullDescription: "Легкие летние шорты из дышащего материала. Идеальны для спорта и отдыха."
    }
  ],
  womens: [
    {
      id: 101,
      name: "Женская футболка Basic",
      description: "Базовая женская футболка из мягкого хлопка",
      price: 35.99,
      brand: "H&M",
      stock: 20,
      category: "tshirts",
      subcategory: "tshirt",
      colors: ["white", "black", "pink", "blue"],
      sizes: ["XS", "S", "M", "L", "XL"],
      images: ["image10.jpg"],
      fullDescription: "Базовая футболка из 100% хлопка. Идеально подходит для создания повседневных образов."
    },
    {
      id: 102,
      name: "Женский топ Crop",
      description: "Стильный укороченный топ",
      price: 42.50,
      brand: "Zara",
      stock: 15,
      category: "tshirts",
      subcategory: "top",
      colors: ["black", "white", "red"],
      sizes: ["XS", "S", "M", "L"],
      images: ["image11.jpg", "image12.jpg"],
      fullDescription: "Модный укороченный топ с приталенным силуэтом. Отлично сочетается с высокой талией."
    },
    {
      id: 103,
      name: "Женское худи Comfort",
      description: "Уютное худи для комфортного отдыха",
      price: 65.00,
      brand: "Champion",
      stock: 10,
      category: "hoodies",
      subcategory: "hoodie",
      colors: ["gray", "pink", "beige"],
      sizes: ["XS", "S", "M", "L", "XL"],
      images: ["image13.jpg"],
      fullDescription: "Мягкое и теплое худи с капюшоном. Изготовлено из качественного флиса."
    },
    {
      id: 104,
      name: "Женские джинсы High Waist",
      description: "Джинсы с высокой посадкой",
      price: 68.99,
      brand: "Levi's",
      stock: 8,
      category: "pants",
      subcategory: "jeans",
      colors: ["blue", "black"],
      sizes: ["25", "26", "27", "28", "29", "30"],
      images: ["image14.jpg", "image15.jpg"],
      fullDescription: "Стильные джинсы с высокой посадкой. Подчеркивают силуэт и удлиняют ноги."
    },
    {
      id: 105,
      name: "Женские туфли Classic",
      description: "Классические туфли на каблуке",
      price: 95.00,
      brand: "Zara",
      stock: 6,
      category: "shoes",
      subcategory: "heels",
      colors: ["black", "beige", "red"],
      sizes: ["36", "37", "38", "39", "40"],
      images: ["image16.jpg"],
      fullDescription: "Элегантные классические туфли на устойчивом каблуке. Подходят для офиса и особых случаев."
    },
    {
      id: 106,
      name: "Женская юбка Mini",
      description: "Стильная мини-юбка",
      price: 45.00,
      brand: "H&M",
      stock: 12,
      category: "pants",
      subcategory: "skirt",
      colors: ["black", "white", "red"],
      sizes: ["XS", "S", "M", "L"],
      images: ["image17.jpg"],
      fullDescription: "Модная мини-юбка А-силуэта. Отлично подходит для создания женственных образов."
    },
    {
      id: 107,
      name: "Женский купальник Bikini",
      description: "Стильный купальник бикини",
      price: 55.99,
      brand: "Victoria's Secret",
      stock: 8,
      category: "swimwear",
      subcategory: "bikini",
      colors: ["black", "blue", "pink"],
      sizes: ["XS", "S", "M", "L"],
      images: ["image18.jpg"],
      fullDescription: "Элегантный купальник бикини с поддержкой. Идеален для пляжного отдыха."
    }
  ]
};

// Конфигурация фильтров
const filterConfig = {
  mens: {
    brands: ["Nike", "Adidas", "Jordan", "Supreme", "Levi's", "Puma", "Under Armour", "Calvin Klein", "Tommy Hilfiger", "Hugo Boss"],
    colors: ["black", "white", "gray", "blue", "red", "green", "yellow", "brown", "beige", "navy"],
    categories: {
      tshirts: ["tshirt", "oversize", "shirt", "polo", "jersey"],
      hoodies: ["zip_hoodie", "hoodie", "sweatshirt", "sweater"],
      pants: ["jeans", "pants", "old_money", "classic", "slim_fit"],
      shorts: ["old_money_shorts", "bermuda", "sport", "denim"],
      shoes: ["sneakers", "boots", "loafers", "slippers"],
      accessories: ["jewelry", "watches", "bags", "belts", "socks", "backpacks", "scarves", "glasses", "underwear"]
    },
    sizes: {
      clothing: ["XS", "S", "M", "L", "XL", "XXL", "XXXL"],
      pants: ["28", "30", "32", "34", "36", "38", "40", "42"],
      shoes: ["39", "40", "41", "42", "43", "44", "45", "46"],
      accessories: ["One Size", "S", "M", "L", "XL"]
    }
  },
  womens: {
    brands: ["Zara", "H&M", "Nike", "Adidas", "Chanel", "Dior", "Gucci", "Prada", "Louis Vuitton", "Versace", "Victoria's Secret", "Champion"],
    colors: ["black", "white", "pink", "blue", "red", "green", "yellow", "purple", "beige", "gray"],
    categories: {
      tshirts: ["tshirt", "top", "shirt", "tank_top"],
      hoodies: ["zip_hoodie", "hoodie", "sweater", "sweatshirt", "longsleeve"],
      pants: ["jeans", "skirt", "sport"],
      shorts: ["denim", "sport"],
      swimwear: ["bikini", "one_piece"],
      shoes: ["heels", "sneakers", "slippers", "mules", "boots", "sandals", "loafers"],
      accessories: ["jewelry", "watches", "bags", "belts", "socks", "backpacks", "scarves", "glasses"]
    },
    sizes: {
      clothing: ["XXS", "XS", "S", "M", "L", "XL", "XXL"],
      pants: ["24", "25", "26", "27", "28", "29", "30", "32"],
      shoes: ["35", "36", "37", "38", "39", "40", "41", "42"],
      accessories: ["One Size", "S", "M", "L", "XL"]
    }
  }
};

// Переводы
const translations = {
  ru: {
    mens_btn: "Мужское",
    womens_btn: "Женское", 
    terms_btn: "Условия работы",
    support_btn: "Поддержка",
    social_btn: "Мы в соцсетях",
    news1_title: "Новая коллекция весна-лето 2025",
    news1_text: "Эксклюзивные модели от ведущих брендов уже в наличии. Ограниченная серия!",
    news2_title: "Скидки до 30% на аксессуары",
    news2_text: "Специальное предложение на все аксессуары. Акция действует до конца месяца.",
    news3_title: "Быстрая доставка по Европе",
    news3_text: "Теперь доставляем заказы еще быстрее - от 5 до 10 рабочих дней.",
    mens_title: "Мужское",
    womens_title: "Женское",
    social_title: "Мы в соцсетях",
    social_text: "Подписывайтесь на наши социальные сети, чтобы быть в курсе всех новинок и специальных предложений!",
    instagram_btn: "📷 Instagram",
    tiktok_btn: "🎵 TikTok",
    whatsapp_btn: "💬 WhatsApp",
    viber_btn: "📞 Viber",
    telegram_btn: "✈️ Telegram",
    cart_title: "Корзина",
    cart_empty: "Корзина пуста",
    cart_total_label: "Итого:",
    checkout_btn: "Оформить заказ",
    terms_title: "Условия работы",
    terms_content: "<p><strong>Добро пожаловать в The Continental!</strong></p><p>Мы предлагаем только премиум-реплики высочайшего качества. Каждый товар проходит строгий контроль качества перед отправкой.</p><p><strong>Условия заказа:</strong></p><p>• Оплата — 100% предоплата<br/>• Доставка по Европе — 7-14 рабочих дней<br/>• Возвратов и обменов нет<br/>• Гарантия качества на все товары</p><p>Мы работаем только с проверенными поставщиками и гарантируем соответствие товара описанию.</p>",
    support_title: "Поддержка",
    support_text: "Наши менеджеры готовы ответить на все ваши вопросы и помочь с выбором товара. Мы работаем 24/7 для вашего удобства.",
    contact_manager_btn: "НАПИСАТЬ МЕНЕДЖЕРУ",
    modal_images_label: "Изображения",
    modal_description_label: "Описание",
    modal_size_label: "Размер",
    modal_color_label: "Цвет",
    modal_quantity_label: "Количество",
    modal_cancel_btn: "Отмена",
    modal_add_btn: "Добавить",
    add_to_cart_btn: "В корзину",
    brand_label: "Бренд:",
    stock_label: "В наличии:",
    search_placeholder: "Поиск...",
    filter_btn: "ФИЛЬТР",
    filter_title: "Фильтры",
    price_filter: "Цена",
    price_from: "От",
    price_to: "До",
    brand_filter: "Бренд",
    color_filter: "Цвет",
    category_filter: "Категория",
    size_filter: "Размер",
    apply_filters: "Применить",
    clear_filters: "Очистить",
    // Категории мужские
    tshirts: "Футболки",
    tshirt: "Футболка",
    oversize: "Оверсайз",
    shirt: "Рубашка",
    polo: "Поло",
    jersey: "Джерси",
    hoodies: "Кофты",
    zip_hoodie: "Зип худи",
    hoodie: "Худи",
    sweatshirt: "Свитшот",
    sweater: "Свитер",
    pants: "Штаны",
    jeans: "Джинсы",
    old_money: "Олд Мани",
    classic: "Классические",
    slim_fit: "Слим фит",
    shorts: "Шорты",
    old_money_shorts: "Олд Мани",
    bermuda: "Бермуды",
    sport: "Спортивные",
    denim: "Джинсовые",
    shoes: "Обувь",
    sneakers: "Кроссовки",
    boots: "Ботинки",
    loafers: "Лоферы",
    slippers: "Тапочки",
    accessories: "Аксессуары",
    jewelry: "Бижутерия",
    watches: "Часы",
    bags: "Сумки",
    belts: "Ремни",
    socks: "Носки",
    backpacks: "Рюкзаки",
    scarves: "Шарфы",
    glasses: "Очки",
    underwear: "Трусы",
    // Категории женские
    top: "Топ",
    tank_top: "Топ-майка",
    longsleeve: "Лонгслив",
    skirt: "Юбка",
    swimwear: "Купальники",
    bikini: "Бикини",
    one_piece: "Слитный",
    heels: "Туфли",
    mules: "Мюли",
    sandals: "Сандали",
    // Цвета
    black: "Черный",
    white: "Белый",
    gray: "Серый",
    blue: "Синий",
    red: "Красный",
    green: "Зеленый",
    yellow: "Желтый",
    brown: "Коричневый",
    beige: "Бежевый",
    navy: "Темно-синий",
    pink: "Розовый",
    purple: "Фиолетовый"
  },
  en: {
    mens_btn: "Men's",
    womens_btn: "Women's",
    terms_btn: "Terms of Service", 
    support_btn: "Support",
    social_btn: "Follow Us",
    news1_title: "New Spring-Summer 2025 Collection",
    news1_text: "Exclusive models from leading brands are now available. Limited series!",
    news2_title: "Up to 30% off accessories",
    news2_text: "Special offer on all accessories. Promotion valid until the end of the month.",
    news3_title: "Fast delivery across Europe",
    news3_text: "We now deliver orders even faster - from 5 to 10 business days.",
    mens_title: "Men's",
    womens_title: "Women's",
    social_title: "Follow Us",
    social_text: "Follow our social networks to stay updated on all new arrivals and special offers!",
    instagram_btn: "📷 Instagram",
    tiktok_btn: "🎵 TikTok",
    whatsapp_btn: "💬 WhatsApp",
    viber_btn: "📞 Viber",
    telegram_btn: "✈️ Telegram",
    cart_title: "Cart",
    cart_empty: "Cart is empty",
    cart_total_label: "Total:",
    checkout_btn: "Checkout",
    terms_title: "Terms of Service",
    terms_content: "<p><strong>Welcome to The Continental!</strong></p><p>We offer only premium replicas of the highest quality. Each item undergoes strict quality control before shipping.</p><p><strong>Order conditions:</strong></p><p>• Payment — 100% prepayment<br/>• Delivery across Europe — 7-14 business days<br/>• No returns or exchanges<br/>• Quality guarantee on all products</p><p>We work only with verified suppliers and guarantee product compliance with description.</p>",
    support_title: "Support",
    support_text: "Our managers are ready to answer all your questions and help with product selection. We work 24/7 for your convenience.",
    contact_manager_btn: "CONTACT MANAGER",
    modal_images_label: "Images",
    modal_description_label: "Description",
    modal_size_label: "Size",
    modal_color_label: "Color",
    modal_quantity_label: "Quantity",
    modal_cancel_btn: "Cancel",
    modal_add_btn: "Add",
    add_to_cart_btn: "Add to Cart",
    brand_label: "Brand:",
    stock_label: "In Stock:",
    search_placeholder: "Search...",
    filter_btn: "FILTER",
    filter_title: "Filters",
    price_filter: "Price",
    price_from: "From",
    price_to: "To",
    brand_filter: "Brand",
    color_filter: "Color",
    category_filter: "Category",
    size_filter: "Size",
    apply_filters: "Apply",
    clear_filters: "Clear",
    // Categories men's
    tshirts: "T-Shirts",
    tshirt: "T-Shirt",
    oversize: "Oversize",
    shirt: "Shirt",
    polo: "Polo",
    jersey: "Jersey",
    hoodies: "Hoodies",
    zip_hoodie: "Zip Hoodie",
    hoodie: "Hoodie",
    sweatshirt: "Sweatshirt",
    sweater: "Sweater",
    pants: "Pants",
    jeans: "Jeans",
    old_money: "Old Money",
    classic: "Classic",
    slim_fit: "Slim Fit",
    shorts: "Shorts",
    old_money_shorts: "Old Money",
    bermuda: "Bermuda",
    sport: "Sport",
    denim: "Denim",
    shoes: "Shoes",
    sneakers: "Sneakers",
    boots: "Boots",
    loafers: "Loafers",
    slippers: "Slippers",
    accessories: "Accessories",
    jewelry: "Jewelry",
    watches: "Watches",
    bags: "Bags",
    belts: "Belts",
    socks: "Socks",
    backpacks: "Backpacks",
    scarves: "Scarves",
    glasses: "Glasses",
    underwear: "Underwear",
    // Categories women's
    top: "Top",
    tank_top: "Tank Top",
    longsleeve: "Longsleeve",
    skirt: "Skirt",
    swimwear: "Swimwear",
    bikini: "Bikini",
    one_piece: "One Piece",
    heels: "Heels",
    mules: "Mules",
    sandals: "Sandals",
    // Colors
    black: "Black",
    white: "White",
    gray: "Gray",
    blue: "Blue",
    red: "Red",
    green: "Green",
    yellow: "Yellow",
    brown: "Brown",
    beige: "Beige",
    navy: "Navy",
    pink: "Pink",
    purple: "Purple"
  },
  uk: {
    mens_btn: "Чоловіче",
    womens_btn: "Жіноче",
    terms_btn: "Умови роботи",
    support_btn: "Підтримка",
    social_btn: "Ми в соцмережах",
    news1_title: "Нова колекція весна-літо 2025",
    news1_text: "Ексклюзивні моделі від провідних брендів вже в наявності. Обмежена серія!",
    news2_title: "Знижки до 30% на аксесуари",
    news2_text: "Спеціальна пропозиція на всі аксесуари. Акція діє до кінця місяця.",
    news3_title: "Швидка доставка по Європі",
    news3_text: "Тепер доставляємо замовлення ще швидше - від 5 до 10 робочих днів.",
    mens_title: "Чоловіче",
    womens_title: "Жіноче",
    social_title: "Ми в соцмережах",
    social_text: "Підписуйтесь на наші соціальні мережі, щоб бути в курсі всіх новинок та спеціальних пропозицій!",
    instagram_btn: "📷 Instagram",
    tiktok_btn: "🎵 TikTok",
    whatsapp_btn: "💬 WhatsApp",
    viber_btn: "📞 Viber",
    telegram_btn: "✈️ Telegram",
    cart_title: "Кошик",
    cart_empty: "Кошик порожній",
    cart_total_label: "Разом:",
    checkout_btn: "Оформити замовлення",
    terms_title: "Умови роботи",
    terms_content: "<p><strong>Ласкаво просимо до The Continental!</strong></p><p>Ми пропонуємо тільки преміум-репліки найвищої якості. Кожен товар проходить суворий контроль якості перед відправкою.</p><p><strong>Умови замовлення:</strong></p><p>• Оплата — 100% передоплата<br/>• Доставка по Європі — 7-14 робочих днів<br/>• Повернень та обмінів немає<br/>• Гарантія якості на всі товари</p><p>Ми працюємо тільки з перевіреними постачальниками та гарантуємо відповідність товару опису.</p>",
    support_title: "Підтримка",
    support_text: "Наші менеджери готові відповісти на всі ваші питання та допомогти з вибором товару. Ми працюємо 24/7 для вашої зручності.",
    contact_manager_btn: "НАПИСАТИ МЕНЕДЖЕРУ",
    modal_images_label: "Зображення",
    modal_description_label: "Опис",
    modal_size_label: "Розмір",
    modal_color_label: "Колір",
    modal_quantity_label: "Кількість",
    modal_cancel_btn: "Скасувати",
    modal_add_btn: "Додати",
    add_to_cart_btn: "В кошик",
    brand_label: "Бренд:",
    stock_label: "В наявності:",
    search_placeholder: "Пошук...",
    filter_btn: "ФІЛЬТР",
    filter_title: "Фільтри",
    price_filter: "Ціна",
    price_from: "Від",
    price_to: "До",
    brand_filter: "Бренд",
    color_filter: "Колір",
    category_filter: "Категорія",
    size_filter: "Розмір",
    apply_filters: "Застосувати",
    clear_filters: "Очистити",
    // Categories men's
    tshirts: "Футболки",
    tshirt: "Футболка",
    oversize: "Оверсайз",
    shirt: "Сорочка",
    polo: "Поло",
    jersey: "Джерсі",
    hoodies: "Кофти",
    zip_hoodie: "Зіп худі",
    hoodie: "Худі",
    sweatshirt: "Світшот",
    sweater: "Светр",
    pants: "Штани",
    jeans: "Джинси",
    old_money: "Олд Мані",
    classic: "Класичні",
    slim_fit: "Слім фіт",
    shorts: "Шорти",
    old_money_shorts: "Олд Мані",
    bermuda: "Бермуди",
    sport: "Спортивні",
    denim: "Джинсові",
    shoes: "Взуття",
    sneakers: "Кросівки",
    boots: "Черевики",
    loafers: "Лофери",
    slippers: "Тапочки",
    accessories: "Аксесуари",
    jewelry: "Біжутерія",
    watches: "Годинники",
    bags: "Сумки",
    belts: "Ремені",
    socks: "Шкарпетки",
    backpacks: "Рюкзаки",
    scarves: "Шарфи",
    glasses: "Окуляри",
    underwear: "Труси",
    // Categories women's
    top: "Топ",
    tank_top: "Топ-майка",
    longsleeve: "Лонгслів",
    skirt: "Спідниця",
    swimwear: "Купальники",
    bikini: "Бікіні",
    one_piece: "Суцільний",
    heels: "Туфлі",
    mules: "Мюлі",
    sandals: "Сандалі",
    // Colors
    black: "Чорний",
    white: "Білий",
    gray: "Сірий",
    blue: "Синій",
    red: "Червоний",
    green: "Зелений",
    yellow: "Жовтий",
    brown: "Коричневий",
    beige: "Бежевий",
    navy: "Темно-синій",
    pink: "Рожевий",
    purple: "Фіолетовий"
  },
  de: {
    mens_btn: "Herren",
    womens_btn: "Damen",
    terms_btn: "Nutzungsbedingungen",
    support_btn: "Support",
    social_btn: "Folgen Sie uns",
    news1_title: "Neue Frühjahr-Sommer 2025 Kollektion",
    news1_text: "Exklusive Modelle führender Marken sind jetzt verfügbar. Limitierte Serie!",
    news2_title: "Bis zu 30% Rabatt auf Accessoires",
    news2_text: "Sonderangebot für alle Accessoires. Aktion gültig bis Ende des Monats.",
    news3_title: "Schnelle Lieferung in ganz Europa",
    news3_text: "Wir liefern Bestellungen jetzt noch schneller - von 5 bis 10 Werktagen.",
    mens_title: "Herren",
    womens_title: "Damen",
    social_title: "Folgen Sie uns",
    social_text: "Folgen Sie unseren sozialen Netzwerken, um über alle Neuheiten und Sonderangebote informiert zu bleiben!",
    instagram_btn: "📷 Instagram",
    tiktok_btn: "🎵 TikTok",
    whatsapp_btn: "💬 WhatsApp",
    viber_btn: "📞 Viber",
    telegram_btn: "✈️ Telegram",
    cart_title: "Warenkorb",
    cart_empty: "Warenkorb ist leer",
    cart_total_label: "Gesamt:",
    checkout_btn: "Zur Kasse",
    terms_title: "Nutzungsbedingungen",
    terms_content: "<p><strong>Willkommen bei The Continental!</strong></p><p>Wir bieten nur Premium-Replikas höchster Qualität. Jeder Artikel durchläuft eine strenge Qualitätskontrolle vor dem Versand.</p><p><strong>Bestellbedingungen:</strong></p><p>• Zahlung — 100% Vorauszahlung<br/>• Lieferung in Europa — 7-14 Werktage<br/>• Keine Rücksendungen oder Umtausch<br/>• Qualitätsgarantie auf alle Produkte</p><p>Wir arbeiten nur mit verifizierten Lieferanten und garantieren die Übereinstimmung des Produkts mit der Beschreibung.</p>",
    support_title: "Support",
    support_text: "Unsere Manager sind bereit, alle Ihre Fragen zu beantworten und bei der Produktauswahl zu helfen. Wir arbeiten 24/7 für Ihre Bequemlichkeit.",
    contact_manager_btn: "MANAGER KONTAKTIEREN",
    modal_images_label: "Bilder",
    modal_description_label: "Beschreibung",
    modal_size_label: "Größe",
    modal_color_label: "Farbe",
    modal_quantity_label: "Menge",
    modal_cancel_btn: "Abbrechen",
    modal_add_btn: "Hinzufügen",
    add_to_cart_btn: "In den Warenkorb",
    brand_label: "Marke:",
    stock_label: "Auf Lager:",
    search_placeholder: "Suchen...",
    filter_btn: "FILTER",
    filter_title: "Filter",
    price_filter: "Preis",
    price_from: "Von",
    price_to: "Bis",
    brand_filter: "Marke",
    color_filter: "Farbe",
    category_filter: "Kategorie",
    size_filter: "Größe",
    apply_filters: "Anwenden",
    clear_filters: "Löschen",
    // Categories men's
    tshirts: "T-Shirts",
    tshirt: "T-Shirt",
    oversize: "Oversize",
    shirt: "Hemd",
    polo: "Polo",
    jersey: "Jersey",
    hoodies: "Hoodies",
    zip_hoodie: "Zip Hoodie",
    hoodie: "Hoodie",
    sweatshirt: "Sweatshirt",
    sweater: "Pullover",
    pants: "Hosen",
    jeans: "Jeans",
    old_money: "Old Money",
    classic: "Klassisch",
    slim_fit: "Slim Fit",
    shorts: "Shorts",
    old_money_shorts: "Old Money",
    bermuda: "Bermuda",
    sport: "Sport",
    denim: "Denim",
    shoes: "Schuhe",
    sneakers: "Sneakers",
    boots: "Stiefel",
    loafers: "Loafer",
    slippers: "Hausschuhe",
    accessories: "Accessoires",
    jewelry: "Schmuck",
    watches: "Uhren",
    bags: "Taschen",
    belts: "Gürtel",
    socks: "Socken",
    backpacks: "Rucksäcke",
    scarves: "Schals",
    glasses: "Brillen",
    underwear: "Unterwäsche",
    // Categories women's
    top: "Top",
    tank_top: "Tank Top",
    longsleeve: "Longsleeve",
    skirt: "Rock",
    swimwear: "Bademode",
    bikini: "Bikini",
    one_piece: "Einteilig",
    heels: "High Heels",
    mules: "Mules",
    sandals: "Sandalen",
    // Colors
    black: "Schwarz",
    white: "Weiß",
    gray: "Grau",
    blue: "Blau",
    red: "Rot",
    green: "Grün",
    yellow: "Gelb",
    brown: "Braun",
    beige: "Beige",
    navy: "Marineblau",
    pink: "Rosa",
    purple: "Lila"
  }
};

// Инициализация приложения
document.addEventListener('DOMContentLoaded', function() {
  initializeApp();
});

function initializeApp() {
  // Инициализация Telegram Web App
  if (window.Telegram && window.Telegram.WebApp) {
    const tg = window.Telegram.WebApp;
    
    // Расширить приложение на весь экран
    tg.expand();
    
    // Настроить основную кнопку
    tg.MainButton.setText('ОТКРЫТЬ');
    tg.MainButton.show();
    
    // Обработчик основной кнопки
    tg.MainButton.onClick(() => {
      tg.close();
    });
    
    // Настроить цвета темы
    if (tg.colorScheme === 'dark') {
      currentTheme = 'dark';
      document.body.setAttribute('data-theme', 'dark');
    } else {
      currentTheme = 'light';
      document.body.setAttribute('data-theme', 'light');
    }
  }
  
  setupEventListeners();
  startNewsCarousel();
  updateLanguage();
  loadCartFromStorage();
  
  // Добавляем обработчик для кнопки фильтра
  const filtersButton = document.getElementById('filters-button');
  if (filtersButton) {
    filtersButton.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      toggleFilterPanel();
    });
  }
}

function setupEventListeners() {
  // Переключатель языка
  document.getElementById('language-select').addEventListener('change', function() {
    currentLanguage = this.value;
    updateLanguage();
    if (currentGender) {
      updateFilterPanel();
    }
  });

  // Переключатель темы
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);

  // Корзина
  document.getElementById('cart-button').addEventListener('click', function() {
    openScreen('cart');
  });

  // Поиск
  document.getElementById('search-input').addEventListener('input', function() {
    if (currentScreen === 'mens' || currentScreen === 'womens') {
      currentPage = 1;
      loadProducts();
    }
  });

  // Фильтры - улучшенный обработчик
  const filtersButton = document.getElementById('filters-button');
  if (filtersButton) {
    filtersButton.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      toggleFilterPanel();
    });
  }

  const filterPanelClose = document.getElementById('filter-panel-close');
  if (filterPanelClose) {
    filterPanelClose.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      closeFilterPanel();
    });
  }

  const filterPanelOverlay = document.getElementById('filter-panel-overlay');
  if (filterPanelOverlay) {
    filterPanelOverlay.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      closeFilterPanel();
    });
  }
}

function updateLanguage() {
  const elements = document.querySelectorAll('[data-key]');
  elements.forEach(element => {
    const key = element.getAttribute('data-key');
    if (translations[currentLanguage] && translations[currentLanguage][key]) {
      if (element.tagName === 'INPUT' && element.type === 'text') {
        element.placeholder = translations[currentLanguage][key];
      } else if (element.innerHTML.includes('<')) {
        element.innerHTML = translations[currentLanguage][key];
      } else {
        element.textContent = translations[currentLanguage][key];
      }
    }
  });
}

function toggleTheme() {
  currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
  document.body.setAttribute('data-theme', currentTheme);
  
  const themeToggle = document.getElementById('theme-toggle');
  themeToggle.textContent = currentTheme === 'dark' ? '🌙' : '☀️';
}

function openScreen(screenName) {
  // Скрыть все экраны
  document.querySelectorAll('.screen').forEach(screen => {
    screen.classList.remove('active');
  });
  
  // Показать нужный экран
  document.getElementById(screenName).classList.add('active');
  currentScreen = screenName;
  
  // Управление видимостью кнопки фильтра
  const filtersButton = document.getElementById('filters-button');
  if (screenName === 'mens' || screenName === 'womens') {
    filtersButton.style.display = 'block';
  } else {
    filtersButton.style.display = 'none';
  }
  
  // Загрузить контент для экранов товаров
  if (screenName === 'mens' || screenName === 'womens') {
    currentGender = screenName;
    currentPage = 1;
    updateFilterPanel();
    loadProducts();
  } else if (screenName === 'cart') {
    updateCartDisplay();
  }
}

function backToHome() {
  closeFilterPanel();
  openScreen('home');
}

function toggleFilterPanel() {
  const filterPanel = document.getElementById('filter-panel');
  const filterOverlay = document.getElementById('filter-panel-overlay');
  
  if (filterPanel.classList.contains('show')) {
    closeFilterPanel();
  } else {
    filterPanel.classList.add('show');
    filterOverlay.classList.add('show');
    updateFilterPanel();
  }
}

function closeFilterPanel() {
  const filterPanel = document.getElementById('filter-panel');
  const filterOverlay = document.getElementById('filter-panel-overlay');
  
  filterPanel.classList.remove('show');
  filterOverlay.classList.remove('show');
}

function updateFilterPanel() {
  if (!currentGender) return;
  
  const filterContent = document.getElementById('filter-content');
  const config = filterConfig[currentGender];
  const t = translations[currentLanguage];
  
  filterContent.innerHTML = `
    <div class="filter-group">
      <label class="filter-label">${t.price_filter}</label>
      <div class="filter-input-group">
        <input type="number" class="filter-input" id="price-from" placeholder="${t.price_from}" min="0">
        <input type="number" class="filter-input" id="price-to" placeholder="${t.price_to}" min="0">
      </div>
    </div>
    
    <div class="filter-group">
      <label class="filter-label">${t.brand_filter}</label>
      <div class="filter-checkbox-group">
        ${config.brands.map(brand => `
          <div class="filter-checkbox">
            <input type="checkbox" id="brand-${brand}" value="${brand}">
            <label for="brand-${brand}">${brand}</label>
          </div>
        `).join('')}
      </div>
    </div>
    
    <div class="filter-group">
      <label class="filter-label">${t.color_filter}</label>
      <div class="filter-checkbox-group">
        ${config.colors.map(color => `
          <div class="filter-checkbox">
            <input type="checkbox" id="color-${color}" value="${color}">
            <label for="color-${color}">${t[color] || color}</label>
          </div>
        `).join('')}
      </div>
    </div>
    
    <div class="filter-group">
      <label class="filter-label">${t.category_filter}</label>
      <div class="filter-checkbox-group">
        ${Object.entries(config.categories).map(([category, subcategories]) => `
          <div class="filter-checkbox">
            <input type="checkbox" id="category-${category}" value="${category}">
            <label for="category-${category}"><strong>${t[category] || category}</strong></label>
          </div>
          ${subcategories.map(sub => `
            <div class="filter-checkbox" style="margin-left: 15px;">
              <input type="checkbox" id="subcategory-${sub}" value="${sub}">
              <label for="subcategory-${sub}">${t[sub] || sub}</label>
            </div>
          `).join('')}
        `).join('')}
      </div>
    </div>
    
    <button class="filter-apply-btn" onclick="applyFilters()">${t.apply_filters}</button>
  `;
}

function applyFilters() {
  currentPage = 1;
  loadProducts();
  closeFilterPanel();
}

function getActiveFilters() {
  const filters = {
    priceFrom: parseFloat(document.getElementById('price-from')?.value) || 0,
    priceTo: parseFloat(document.getElementById('price-to')?.value) || Infinity,
    brands: [],
    colors: [],
    categories: [],
    subcategories: []
  };
  
  document.querySelectorAll('#filter-content input[type="checkbox"]:checked').forEach(checkbox => {
    const value = checkbox.value;
    const id = checkbox.id;
    
    if (id.startsWith('brand-')) {
      filters.brands.push(value);
    } else if (id.startsWith('color-')) {
      filters.colors.push(value);
    } else if (id.startsWith('category-')) {
      filters.categories.push(value);
    } else if (id.startsWith('subcategory-')) {
      filters.subcategories.push(value);
    }
  });
  
  return filters;
}

function loadProducts() {
  if (!currentGender) return;
  
  const searchTerm = document.getElementById('search-input').value.toLowerCase();
  const filters = getActiveFilters();
  let filteredProducts = products[currentGender].filter(product => {
    // Поиск
    if (searchTerm && !product.name.toLowerCase().includes(searchTerm) && 
        !product.description.toLowerCase().includes(searchTerm)) {
      return false;
    }
    
    // Фильтр по цене
    if (product.price < filters.priceFrom || product.price > filters.priceTo) {
      return false;
    }
    
    // Фильтр по бренду
    if (filters.brands.length > 0 && !filters.brands.includes(product.brand)) {
      return false;
    }
    
    // Фильтр по цвету
    if (filters.colors.length > 0 && !product.colors.some(color => filters.colors.includes(color))) {
      return false;
    }
    
    // Фильтр по категории
    if (filters.categories.length > 0 && !filters.categories.includes(product.category)) {
      return false;
    }
    
    // Фильтр по подкатегории
    if (filters.subcategories.length > 0 && !filters.subcategories.includes(product.subcategory)) {
      return false;
    }
    
    return true;
  });
  
  // Пагинация
  const totalPages = Math.ceil(filteredProducts.length / itemsPerPage);
  const startIndex = (currentPage - 1) * itemsPerPage;
  const endIndex = startIndex + itemsPerPage;
  const pageProducts = filteredProducts.slice(startIndex, endIndex);
  
  // Отображение товаров
  const contentDiv = document.getElementById(currentGender + '-content');
  const t = translations[currentLanguage];
  
  if (pageProducts.length === 0) {
    contentDiv.innerHTML = `<div class="empty-state">Товары не найдены</div>`;
  } else {
    contentDiv.innerHTML = pageProducts.map(product => `
      <div class="product" onclick="${isDeleteMode ? `deleteProduct(${product.id})` : `openProductDetail(${product.id})`}">
        <div class="product-image">Изображение товара</div>
        <div class="product-name">${product.name}</div>
        <div class="product-description">${product.description}</div>
        <div class="product-price">€${product.price.toFixed(2)}</div>
        <div class="product-details">
          <span>${t.brand_label} ${product.brand}</span>
          <span>${t.stock_label} ${product.stock}</span>
        </div>
        <button class="add-to-cart-btn" onclick="event.stopPropagation(); ${isDeleteMode ? `deleteProduct(${product.id})` : `openProductDetail(${product.id})`}">${isDeleteMode ? 'Удалить' : t.add_to_cart_btn}</button>
      </div>
    `).join('');
  }
  
  // Пагинация
  updatePagination(totalPages);
}

function updatePagination(totalPages) {
  const paginationDiv = document.getElementById(currentGender + '-pagination');
  
  if (totalPages <= 1) {
    paginationDiv.innerHTML = '';
    return;
  }
  
  let paginationHTML = '';
  
  // Предыдущая страница
  if (currentPage > 1) {
    paginationHTML += `<button onclick="changePage(${currentPage - 1})">←</button>`;
  }
  
  // Номера страниц
  for (let i = 1; i <= totalPages; i++) {
    if (i === currentPage) {
      paginationHTML += `<button class="active">${i}</button>`;
    } else if (i === 1 || i === totalPages || (i >= currentPage - 2 && i <= currentPage + 2)) {
      paginationHTML += `<button onclick="changePage(${i})">${i}</button>`;
    } else if (i === currentPage - 3 || i === currentPage + 3) {
      paginationHTML += `<button disabled>...</button>`;
    }
  }
  
  // Следующая страница
  if (currentPage < totalPages) {
    paginationHTML += `<button onclick="changePage(${currentPage + 1})">→</button>`;
  }
  
  paginationDiv.innerHTML = paginationHTML;
}

function changePage(page) {
  currentPage = page;
  loadProducts();
}

function openProductDetail(productId) {
  const product = products[currentGender].find(p => p.id === productId);
  if (!product) return;
  
  currentProduct = product;
  const t = translations[currentLanguage];
  
  // Заполнить детальный экран
  document.getElementById('product-detail-header-title').textContent = product.name;
  document.getElementById('product-detail-title').textContent = product.name;
  document.getElementById('product-detail-price').textContent = `€${product.price.toFixed(2)}`;
  document.getElementById('product-detail-description').textContent = product.fullDescription;
  
  // Изображения
  const mainImage = document.getElementById('product-main-image');
  mainImage.textContent = `Фото 1 - ${product.name}`;
  
  const thumbnailGallery = document.getElementById('product-thumbnail-gallery');
  thumbnailGallery.innerHTML = product.images.map((img, index) => `
    <div class="product-thumbnail ${index === 0 ? 'active' : ''}" onclick="selectProductImage(${index})">
      ${index + 1}
    </div>
  `).join('');
  
  // Размеры
  const sizeSelect = document.getElementById('product-detail-size');
  sizeSelect.innerHTML = product.sizes.map(size => `
    <option value="${size}">${size}</option>
  `).join('');
  
  // Цвета
  const colorSelect = document.getElementById('product-detail-color');
  colorSelect.innerHTML = product.colors.map(color => `
    <option value="${color}">${t[color] || color}</option>
  `).join('');
  
  // Количество
  document.getElementById('product-detail-quantity').textContent = '1';
  
  // Открыть экран
  openScreen('product-detail');
}

function selectProductImage(index) {
  document.querySelectorAll('.product-thumbnail').forEach((img, i) => {
    img.classList.toggle('active', i === index);
  });
  
  const mainImage = document.getElementById('product-main-image');
  mainImage.textContent = `Фото ${index + 1} - ${currentProduct.name}`;
}

function changeProductQuantity(change) {
  const quantityDisplay = document.getElementById('product-detail-quantity');
  let currentQuantity = parseInt(quantityDisplay.textContent);
  currentQuantity = Math.max(1, currentQuantity + change);
  quantityDisplay.textContent = currentQuantity;
}

function addToCartFromDetail() {
  if (!currentProduct) return;
  
  const size = document.getElementById('product-detail-size').value;
  const color = document.getElementById('product-detail-color').value;
  const quantity = parseInt(document.getElementById('product-detail-quantity').textContent);
  
  const cartItem = {
    id: currentProduct.id,
    name: currentProduct.name,
    price: currentProduct.price,
    size: size,
    color: color,
    quantity: quantity,
    gender: currentGender
  };
  
  // Проверить, есть ли уже такой товар в корзине
  const existingItemIndex = cart.findIndex(item => 
    item.id === cartItem.id && 
    item.size === cartItem.size && 
    item.color === cartItem.color &&
    item.gender === cartItem.gender
  );
  
  if (existingItemIndex !== -1) {
    cart[existingItemIndex].quantity += quantity;
  } else {
    cart.push(cartItem);
  }
  
  updateCartCount();
  saveCartToStorage();
  
  // Показать уведомление
  alert('Товар добавлен в корзину!');
}

function backFromProductDetail() {
  if (currentGender) {
    openScreen(currentGender);
  } else {
    openScreen('home');
  }
}

// CRUD функции для управления товарами
let isDeleteMode = false;
let isAdminMode = false;

function toggleAdminMode() {
  isAdminMode = !isAdminMode;
  const adminPanel = document.getElementById('admin-panel');
  adminPanel.style.display = isAdminMode ? 'block' : 'none';
}

function showAddProductForm() {
  const name = prompt('Название товара:');
  if (!name) return;
  
  const description = prompt('Описание товара:');
  if (!description) return;
  
  const price = parseFloat(prompt('Цена товара (€):'));
  if (!price || price <= 0) return;
  
  const brand = prompt('Бренд:');
  if (!brand) return;
  
  const category = prompt('Категория (tshirts, hoodies, pants, shorts, shoes, accessories):');
  if (!category) return;
  
  const subcategory = prompt('Подкатегория:');
  if (!subcategory) return;
  
  const colors = prompt('Цвета (через запятую):').split(',').map(c => c.trim());
  const sizes = prompt('Размеры (через запятую):').split(',').map(s => s.trim());
  
  const stock = parseInt(prompt('Количество на складе:')) || 10;
  
  const newProduct = {
    id: Date.now(), // Простой способ генерации уникального ID
    name: name,
    description: description,
    price: price,
    brand: brand,
    stock: stock,
    category: category,
    subcategory: subcategory,
    colors: colors,
    sizes: sizes,
    images: ['new_product.jpg'],
    fullDescription: description
  };
  
  if (currentGender && products[currentGender]) {
    products[currentGender].push(newProduct);
    loadProducts();
    alert('Товар добавлен!');
  }
}

function toggleDeleteMode() {
  isDeleteMode = !isDeleteMode;
  const deleteBtn = document.querySelector('.admin-btn.delete');
  deleteBtn.textContent = isDeleteMode ? 'Отменить удаление' : 'Удалить товары';
  deleteBtn.style.background = isDeleteMode ? '#ffc107' : '#dc3545';
  
  if (isDeleteMode) {
    alert('Режим удаления активирован. Нажмите на товар, чтобы удалить его.');
  }
  
  loadProducts(); // Перезагрузить товары для обновления обработчиков
}

function deleteProduct(productId) {
  if (!isDeleteMode) return;
  
  if (confirm('Вы уверены, что хотите удалить этот товар?')) {
    const productIndex = products[currentGender].findIndex(p => p.id === productId);
    if (productIndex !== -1) {
      products[currentGender].splice(productIndex, 1);
      loadProducts();
      alert('Товар удален!');
    }
  }
}

function hideAdminPanel() {
  isAdminMode = false;
  isDeleteMode = false;
  document.getElementById('admin-panel').style.display = 'none';
  const deleteBtn = document.querySelector('.admin-btn.delete');
  deleteBtn.textContent = 'Удалить товары';
  deleteBtn.style.background = '#dc3545';
  loadProducts();
}

// Добавить обработчик двойного клика для активации админ режима
document.addEventListener('dblclick', function(e) {
  if (e.target.classList.contains('logo')) {
    toggleAdminMode();
  }
});

function selectImage(index) {
  document.querySelectorAll('.modal-image').forEach((img, i) => {
    img.classList.toggle('active', i === index);
  });
}

function closeModal() {
  document.getElementById('product-modal').classList.remove('show');
  currentProduct = null;
}

function confirmAddToCart() {
  if (!currentProduct) return;
  
  const size = document.getElementById('modal-size').value;
  const color = document.getElementById('modal-color').value;
  const quantity = parseInt(document.getElementById('modal-quantity').value);
  
  const cartItem = {
    id: currentProduct.id,
    name: currentProduct.name,
    price: currentProduct.price,
    size: size,
    color: color,
    quantity: quantity,
    gender: currentGender
  };
  
  // Проверить, есть ли уже такой товар в корзине
  const existingItemIndex = cart.findIndex(item => 
    item.id === cartItem.id && 
    item.size === cartItem.size && 
    item.color === cartItem.color &&
    item.gender === cartItem.gender
  );
  
  if (existingItemIndex !== -1) {
    cart[existingItemIndex].quantity += quantity;
  } else {
    cart.push(cartItem);
  }
  
  updateCartCount();
  saveCartToStorage();
  closeModal();
}

function updateCartCount() {
  const cartCount = document.getElementById('cart-count');
  const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
  
  if (totalItems > 0) {
    cartCount.textContent = totalItems;
    cartCount.style.display = 'flex';
  } else {
    cartCount.style.display = 'none';
  }
}

function updateCartDisplay() {
  const cartContent = document.getElementById('cart-content');
  const cartTotal = document.getElementById('cart-total');
  const t = translations[currentLanguage];
  
  if (cart.length === 0) {
    cartContent.innerHTML = `<div class="empty-state">${t.cart_empty}</div>`;
    cartTotal.style.display = 'none';
    return;
  }
  
  cartContent.innerHTML = cart.map((item, index) => `
    <div class="cart-item">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
        <div style="font-weight: 600;">${item.name}</div>
        <button onclick="removeFromCart(${index})" style="background: #ff4444; color: white; border: none; border-radius: 4px; padding: 4px 8px; cursor: pointer;">×</button>
      </div>
      <div style="font-size: 12px; color: #999; margin-bottom: 4px;">
        ${t.modal_size_label} ${item.size}, ${t.modal_color_label} ${t[item.color] || item.color}
      </div>
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <div style="display: flex; align-items: center; gap: 8px;">
          <button onclick="changeQuantity(${index}, -1)" style="background: #1a1a1a; color: white; border: 1px solid #333; border-radius: 4px; padding: 4px 8px; cursor: pointer;">-</button>
          <span>${item.quantity}</span>
          <button onclick="changeQuantity(${index}, 1)" style="background: #1a1a1a; color: white; border: 1px solid #333; border-radius: 4px; padding: 4px 8px; cursor: pointer;">+</button>
        </div>
        <div style="font-weight: 600;">€${(item.price * item.quantity).toFixed(2)}</div>
      </div>
    </div>
  `).join('');
  
  const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
  document.getElementById('total-price').textContent = `€${totalPrice.toFixed(2)}`;
  cartTotal.style.display = 'block';
}

function removeFromCart(index) {
  cart.splice(index, 1);
  updateCartCount();
  updateCartDisplay();
  saveCartToStorage();
}

function changeQuantity(index, change) {
  cart[index].quantity += change;
  if (cart[index].quantity <= 0) {
    removeFromCart(index);
  } else {
    updateCartCount();
    updateCartDisplay();
    saveCartToStorage();
  }
}

function checkout() {
  if (cart.length === 0) {
    alert('Корзина пуста!');
    return;
  }
  
  const now = new Date();
  const date = now.toLocaleDateString('ru-RU');
  const time = now.toLocaleTimeString('ru-RU');
  
  const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
  const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
  
  // Группировка товаров по категориям
  const groupedItems = {};
  cart.forEach(item => {
    const category = getCategoryName(item);
    if (!groupedItems[category]) {
      groupedItems[category] = [];
    }
    groupedItems[category].push(item);
  });
  
  // Формирование сообщения
  let message = `*Новый заказ из The Continental*\n\n`;
  message += `📅 Дата: ${date}, ${time}\n`;
  message += `🌐 Язык: ${currentLanguage.toUpperCase()}\n`;
  message += `📊 Всего позиций: ${totalItems}\n\n`;
  message += `📦 *Детали заказа:*\n\n`;
  
  // Добавление товаров по категориям
  Object.entries(groupedItems).forEach(([category, items]) => {
    message += `${getCategoryEmoji(category)} ${category}:\n`;
    items.forEach((item, index) => {
      const t = translations[currentLanguage];
      const colorName = t[item.color] || item.color;
      message += `  ${index + 1}. ${item.name}\n`;
      message += `     Размер: ${item.size}\n`;
      message += `     Цвет: ${colorName}\n`;
      message += `     Количество: ${item.quantity}\n`;
      message += `     Цена: €${(item.price * item.quantity).toFixed(2)}\n\n`;
    });
  });
  
  message += `💰 *Общая сумма: €${totalPrice.toFixed(2)}*`;
  
  // Отправка сообщения через Telegram
  const telegramUrl = `https://t.me/a6tribunal?text=${encodeURIComponent(message)}`;
  
  if (window.Telegram && window.Telegram.WebApp) {
    // Если в Telegram Web App, используем API
    window.Telegram.WebApp.openTelegramLink(telegramUrl);
  } else {
    // Иначе открываем ссылку
    window.open(telegramUrl, '_blank');
  }
  
  // Очистить корзину после оформления заказа
  cart = [];
  updateCartCount();
  updateCartDisplay();
  saveCartToStorage();
  
  alert('Заказ отправлен менеджеру!');
}

function getCategoryName(item) {
  const t = translations[currentLanguage];
  
  // Определяем категорию на основе товара
  if (item.name.toLowerCase().includes('футболка') || item.name.toLowerCase().includes('t-shirt') || item.name.toLowerCase().includes('рубашка')) {
    return t.tshirts || 'Футболки';
  } else if (item.name.toLowerCase().includes('худи') || item.name.toLowerCase().includes('hoodie')) {
    return t.hoodies || 'Кофты';
  } else if (item.name.toLowerCase().includes('джинсы') || item.name.toLowerCase().includes('jeans') || item.name.toLowerCase().includes('штаны')) {
    return t.pants || 'Штаны';
  } else if (item.name.toLowerCase().includes('шорты') || item.name.toLowerCase().includes('shorts')) {
    return t.shorts || 'Шорты';
  } else if (item.name.toLowerCase().includes('кроссовки') || item.name.toLowerCase().includes('туфли') || item.name.toLowerCase().includes('shoes')) {
    return t.shoes || 'Обувь';
  } else if (item.name.toLowerCase().includes('купальник') || item.name.toLowerCase().includes('bikini')) {
    return t.swimwear || 'Купальники';
  } else {
    return t.accessories || 'Аксессуары';
  }
}

function getCategoryEmoji(category) {
  const emojiMap = {
    'Футболки': '👕',
    'T-Shirts': '👕',
    'Кофты': '🧥',
    'Hoodies': '🧥',
    'Штаны': '👖',
    'Pants': '👖',
    'Шорты': '🩳',
    'Shorts': '🩳',
    'Обувь': '👟',
    'Shoes': '👟',
    'Купальники': '👙',
    'Swimwear': '👙',
    'Аксессуары': '👜',
    'Accessories': '👜'
  };
  
  return emojiMap[category] || '📦';
}
function saveCartToStorage() {
  localStorage.setItem('continental_cart', JSON.stringify(cart));
}

function loadCartFromStorage() {
  const savedCart = localStorage.getItem('continental_cart');
  if (savedCart) {
    cart = JSON.parse(savedCart);
    updateCartCount();
  }
}

// Функции управления панелью фильтров
function toggleFilterPanel() {
  const panel = document.getElementById('filter-panel');
  const overlay = document.getElementById('filter-panel-overlay');
  
  if (!panel || !overlay) {
    console.error('Filter panel elements not found');
    return;
  }
  
  const isOpen = panel.classList.contains('show');
  
  if (isOpen) {
    closeFilterPanel();
  } else {
    // Принудительно убираем класс show перед добавлением
    panel.classList.remove('show');
    overlay.classList.remove('show');
    document.body.classList.remove('filter-open');
    
    // Добавляем небольшую задержку для корректной анимации
    setTimeout(() => {
      panel.classList.add('show');
      overlay.classList.add('show');
      document.body.classList.add('filter-open');
      updateFilterPanel();
    }, 10);
  }
}

function closeFilterPanel() {
  const panel = document.getElementById('filter-panel');
  const overlay = document.getElementById('filter-panel-overlay');
  
  if (panel && overlay) {
    panel.classList.remove('show');
    overlay.classList.remove('show');
    document.body.classList.remove('filter-open');
  }
}

function applyFilters() {
  currentPage = 1;
  loadProducts();
  closeFilterPanel();
}

function openSocialLink(url) {
  window.open(url, '_blank');
}

// Карусель новостей
function startNewsCarousel() {
  slideInterval = setInterval(nextSlide, 4000);
}

function nextSlide() {
  const slides = document.querySelectorAll('.news-slide');
  const indicators = document.querySelectorAll('.news-indicator');
  
  currentSlide = (currentSlide + 1) % slides.length;
  
  document.getElementById('news-slides').style.transform = `translateX(-${currentSlide * 100}%)`;
  
  indicators.forEach((indicator, index) => {
    indicator.classList.toggle('active', index === currentSlide);
  });
}

function goToSlide(slideIndex) {
  currentSlide = slideIndex;
  
  document.getElementById('news-slides').style.transform = `translateX(-${currentSlide * 100}%)`;
  
  document.querySelectorAll('.news-indicator').forEach((indicator, index) => {
    indicator.classList.toggle('active', index === currentSlide);
  });
  
  // Перезапустить автопрокрутку
  clearInterval(slideInterval);
  startNewsCarousel();
}

// Закрытие модального окна при клике вне его
document.getElementById('product-modal').addEventListener('click', function(e) {
  if (e.target === this) {
    closeModal();
  }
});

</script>

</body>
</html>


