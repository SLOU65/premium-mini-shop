<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport"/>
<title>The Continental</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
    /* Используем системные шрифты для лучшей совместимости */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    }

    /* Анимация "плавания" для логотипа */
    @keyframes float {
      0%, 100% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-10px);
      }
    }

    body {
      background-color: #000000;
      color: #ffffff;
      overflow-x: hidden;
      min-height: 100vh;
      padding-top: 50px;
      transition: all 0.3s ease;
    }

    /* Светлая тема */
    body[data-theme="light"] {
      background-color: #ffffff;
      color: #000000;
    }

    .top-bar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 50px;
  background: rgba(0, 0, 0, 0.7); /* или #111, можно с прозрачностью */
  color: #ffffff;
  display: flex;
  align-items: center;
  padding: 0 12px;
  z-index: 1000;
  box-shadow: none; /* Убираем тень */
  border-bottom: none; /* Убираем границу */
  gap: 8px;
  backdrop-filter: blur(10px); /* Можно оставить */
  transition: background 0.3s ease, color 0.3s ease, border-bottom 0.3s ease;
}

    body[data-theme="light"] .top-bar {
  background: #ffffff;       /* светлый фон */
  color: #000000;            /* чёрный текст */
  border-bottom: none;
  box-shadow: none;
  transition: background 0.3s ease, color 0.3s ease;
}

    .language-select {
      background: rgba(128, 128, 128, 0.15);
      border: 1px solid rgba(128, 128, 128, 0.4);
      border-radius: 6px;
      padding: 4px 6px;
      color: inherit;
      font-size: 11px;
      min-width: 38px;
      font-weight: 500;
    }

    /* Уменьшенный поиск без иконки лупы */
    .search-container {
      flex: 1;
      max-width: 90px;
      background: rgba(128, 128, 128, 0.15);
      border: 1px solid rgba(128, 128, 128, 0.3);
      border-radius: 15px;
      padding: 5px 8px;
      display: flex;
      align-items: center;
      transition: all 0.3s ease;
    }

    .search-container:focus-within {
      background: rgba(128, 128, 128, 0.25);
      border-color: rgba(128, 128, 128, 0.5);
    }

    .search-input {
      background: transparent;
      border: none;
      outline: none;
      color: inherit;
      font-size: 11px;
      width: 100%;
      font-weight: 400;
    }

    .search-input::placeholder {
      color: rgba(128, 128, 128, 0.7);
    }

    /* Кнопка фильтров с исправленной кликабельностью */
    .filters-button {
      background: rgba(128, 128, 128, 0.15);
      border: 1px solid rgba(128, 128, 128, 0.4);
      border-radius: 6px;
      padding: 5px 10px;
      color: inherit;
      font-size: 10px;
      font-weight: 600;
      cursor: pointer;
      position: relative;
      transition: all 0.3s ease;
      user-select: none;
      z-index: 1001;
    }

    .filters-button:hover {
      background: rgba(128, 128, 128, 0.25);
      transform: translateY(-1px);
    }

    .filters-button:active {
      transform: translateY(0);
      background: rgba(128, 128, 128, 0.3);
    }

    /* Выпадающее меню фильтров с исправленным z-index */
    .filters-dropdown {
      position: absolute;
      top: calc(100% + 5px);
      left: 0;
      background: #ffffff;
      color: #000000;
      border: 1px solid rgba(128, 128, 128, 0.4);
      border-radius: 8px;
      padding: 10px;
      display: none;
      z-index: 1002;
      min-width: 160px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
      backdrop-filter: blur(10px);
    }

    body[data-theme="light"] .filters-dropdown {
      background: #000000;
      color: #ffffff;
    }

    .filters-dropdown.show {
      display: block;
      animation: fadeInDown 0.3s ease;
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .filter-group {
      margin-bottom: 10px;
    }

    .filter-group:last-child {
      margin-bottom: 0;
    }

    .filter-label {
      font-size: 10px;
      color: inherit;
      margin-bottom: 4px;
      display: block;
      font-weight: 600;
    }

    .filter-select {
      background: rgba(128, 128, 128, 0.1);
      border: 1px solid rgba(128, 128, 128, 0.3);
      border-radius: 4px;
      padding: 4px 6px;
      color: inherit;
      font-size: 10px;
      width: 100%;
      cursor: pointer;
    }

    .top-bar-right {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-left: auto;
    }

    .theme-toggle, .cart-button {
      background: rgba(128, 128, 128, 0.15);
      border: 1px solid rgba(128, 128, 128, 0.4);
      border-radius: 6px;
      padding: 5px 7px;
      cursor: pointer;
      color: inherit;
      font-size: 13px;
      transition: all 0.3s ease;
      position: relative;
      font-weight: 500;
    }

    .theme-toggle:hover, .cart-button:hover {
      background: rgba(128, 128, 128, 0.25);
      transform: translateY(-1px);
    }

    .theme-toggle:active, .cart-button:active {
      transform: translateY(0);
    }

    .cart-count {
      position: absolute;
      top: -4px;
      right: -4px;
      background: #ff4444;
      color: white;
      border-radius: 50%;
      width: 16px;
      height: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 9px;
      font-weight: bold;
    }

    /* Основной контейнер */
    .container {
      width: 100%;
      max-width: 100vw;
      padding: 0;
      position: relative;
    }

    .screen {
      display: none;
      padding: 15px;
      min-height: calc(100vh - 50px);
    }

    .screen.active {
      display: block;
    }

    /* Логотип с анимацией плавания */
    .logo {
      font-family: serif;
      font-size: 32px;
      font-weight: 700;
      text-align: center;
      margin: 20px 0 20px; /* Уменьшили отступ снизу */
      background: linear-gradient(135deg, #ffffff 0%, #ffffff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: 2px;
      position: relative;
      animation: float 3s ease-in-out infinite;
    }

    body[data-theme="light"] .logo {
      background: linear-gradient(135deg, #000000 0%, #666666 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .logo::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 50px;
      height: 2px;
      background: linear-gradient(90deg, transparent, #ffffff, transparent);
    }

    body[data-theme="light"] .logo::after {
      background: linear-gradient(90deg, transparent, #000000, transparent);
    }

    /* Раздел новостей */
    .news-section {
      margin: 20px 0 30px;
      text-align: center;
    }

    .news-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 15px;
      color: #ffffff;
    }

    body[data-theme="light"] .news-title {
      color: #000000;
    }

    .news-carousel {
      position: relative;
      overflow: hidden;
      border-radius: 12px;
      background: #1a1a1a;
      border: 1px solid rgba(128, 128, 128, 0.2);
      height: 120px;
    }

    body[data-theme="light"] .news-carousel {
      background: #f5f5f5;
    }

    .news-slides {
      display: flex;
      transition: transform 0.3s ease;
      height: 100%;
    }

    .news-slide {
      min-width: 100%;
      padding: 15px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    .news-slide h3 {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 8px;
      color: #ffffff;
    }

    body[data-theme="light"] .news-slide h3 {
      color: #000000;
    }

    .news-slide p {
      font-size: 12px;
      color: #999999;
      line-height: 1.4;
    }

    body[data-theme="light"] .news-slide p {
      color: #666666;
    }

    .news-indicators {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 10px;
    }

    .news-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(128, 128, 128, 0.4);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .news-indicator.active {
      background: #007bff;
      transform: scale(1.2);
    }

    /* Основные кнопки - ИСПРАВЛЕНЫ ЦВЕТА */
    .btn {
      background: #ffffff !important; /* Белые кнопки в темной теме */
      color: #000000 !important; /* Черный текст на белых кнопках */
      padding: 14px 20px;
      margin: 8px 0;
      border: none;
      font-weight: 600;
      font-size: 15px;
      width: 100%;
      text-align: center;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
    }

    /* Черные кнопки в светлой теме */
    body[data-theme="light"] .btn {
      background: #000000 !important; /* Черные кнопки в светлой теме */
      color: #ffffff !important; /* Белый текст на черных кнопках */
    }

    .btn:active {
      transform: scale(0.98);
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
    }

    /* Кнопки социальных сетей */
    .social-btn {
      background: #ffffff !important;
      color: #000000 !important;
      padding: 12px 20px;
      margin: 6px 0;
      border: none;
      font-weight: 600;
      font-size: 14px;
      width: 100%;
      text-align: center;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    body[data-theme="light"] .social-btn {
      background: #000000 !important;
      color: #ffffff !important;
    }

    .social-btn:active {
      transform: scale(0.98);
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
    }

    /* Заголовки экранов */
    .header {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
      position: relative;
    }

    .back {
      position: absolute;
      left: 0;
      background: #1a1a1a;
      border: 1px solid rgba(128, 128, 128, 0.3);
      color: #ffffff;
      font-size: 18px;
      width: 36px;
      height: 36px;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    body[data-theme="light"] .back {
      background: #f5f5f5;
      color: #000000;
    }

    .back:active {
      transform: scale(0.95);
    }

    h1 {
      font-size: 20px;
      font-weight: 700;
      text-align: center;
      color: #ffffff;
    }

    body[data-theme="light"] h1 {
      color: #000000;
    }

    /* Товары */
    .product {
      background: #1a1a1a;
      border: 1px solid rgba(128, 128, 128, 0.2);
      padding: 15px;
      margin: 10px 0;
      border-radius: 12px;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    body[data-theme="light"] .product {
      background: #f5f5f5;
    }

    .product:active {
      transform: scale(0.98);
      background: rgba(128, 128, 128, 0.1);
    }

    .product-image {
      width: 100%;
      height: 120px;
      background: #333;
      border-radius: 8px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #666;
      font-size: 12px;
    }

    .product-name {
      font-weight: 600;
      font-size: 16px;
      margin-bottom: 5px;
      color: #ffffff;
    }

    body[data-theme="light"] .product-name {
      color: #000000;
    }

    .product-description {
      color: #999999;
      font-size: 13px;
      margin-bottom: 8px;
      line-height: 1.3;
    }

    body[data-theme="light"] .product-description {
      color: #666666;
    }

    .product-price {
      color: #ffffff;
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    body[data-theme="light"] .product-price {
      color: #000000;
    }

    .product-details {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      font-size: 11px;
      color: #999999;
    }

    body[data-theme="light"] .product-details {
      color: #666666;
    }

    .add-to-cart-btn {
      background: #007bff;
      color: white;
      padding: 8px 16px;
      border: none;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      transition: all 0.3s ease;
    }

    .add-to-cart-btn:active {
      transform: scale(0.98);
      background: #0056b3;
    }

    /* Модальное окно для выбора товара */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      padding: 20px;
    }

    .modal.show {
      display: flex;
    }

    .modal-content {
      background: #000000;
      border: 1px solid rgba(128, 128, 128, 0.3);
      border-radius: 15px;
      padding: 25px;
      max-width: 320px;
      width: 100%;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    body[data-theme="light"] .modal-content {
      background: #ffffff;
    }

    .modal-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 20px;
      text-align: center;
      color: #ffffff;
    }

    body[data-theme="light"] .modal-title {
      color: #000000;
    }

    .modal-group {
      margin-bottom: 18px;
    }

    .modal-label {
      font-size: 13px;
      color: #ffffff;
      margin-bottom: 6px;
      display: block;
      font-weight: 500;
    }

    body[data-theme="light"] .modal-label {
      color: #000000;
    }

    .modal-select, .modal-input {
      background: #1a1a1a;
      border: 1px solid rgba(128, 128, 128, 0.3);
      border-radius: 8px;
      padding: 10px;
      color: #ffffff;
      font-size: 15px;
      width: 100%;
    }

    body[data-theme="light"] .modal-select,
    body[data-theme="light"] .modal-input {
      background: #f5f5f5;
      color: #000000;
    }

    .modal-buttons {
      display: flex;
      gap: 12px;
      margin-top: 25px;
    }

    .modal-btn {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .modal-btn.primary {
      background: #007bff;
      color: white;
    }

    .modal-btn.secondary {
      background: #1a1a1a;
      color: #ffffff;
      border: 1px solid rgba(128, 128, 128, 0.3);
    }

    body[data-theme="light"] .modal-btn.secondary {
      background: #f5f5f5;
      color: #000000;
    }

    .modal-btn:active {
      transform: scale(0.98);
    }

    /* Пагинация */
    .pagination {
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 20px 0;
      gap: 8px;
      flex-wrap: wrap;
    }

    .pagination button {
      background: #ffffff;
      color: #000000;
      border: 1px solid rgba(128, 128, 128, 0.3);
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.3s ease;
      min-width: 32px;
    }

    body[data-theme="light"] .pagination button {
      background: #000000;
      color: #ffffff;
    }

    .pagination button.active {
      background: #007bff;
      color: white;
      border-color: #007bff;
    }

    .pagination button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .pagination button:active:not(:disabled) {
      transform: scale(0.95);
    }

    /* Корзина */
    .cart-item {
      background: #1a1a1a;
      border: 1px solid rgba(128, 128, 128, 0.2);
      padding: 12px;
      margin: 8px 0;
      border-radius: 10px;
    }

    body[data-theme="light"] .cart-item {
      background: #f5f5f5;
    }

    .cart-total {
      border-top: 1px solid rgba(128, 128, 128, 0.3);
      padding-top: 15px;
      margin-top: 15px;
    }

    .total-row {
      display: flex;
      justify-content: space-between;
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 15px;
    }

    .checkout-btn {
      background: #28a745;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      transition: all 0.3s ease;
    }

    .checkout-btn:active {
      transform: scale(0.98);
      background: #1e7e34;
    }

    /* Условия работы */
    .terms-content {
      line-height: 1.5;
      color: #ffffff;
      font-size: 14px;
      background: #1a1a1a;
      padding: 15px;
      border-radius: 10px;
      border: 1px solid rgba(128, 128, 128, 0.2);
    }

    body[data-theme="light"] .terms-content {
      color: #000000;
      background: #f5f5f5;
    }

    .terms-content strong {
      color: #ffffff;
    }

    body[data-theme="light"] .terms-content strong {
      color: #000000;
    }

    /* Поддержка */
    .support-link {
      display: inline-block;
      background: #ffffff;
      color: #000000;
      padding: 12px 20px;
      border-radius: 10px;
      font-weight: 600;
      font-size: 14px;
      text-decoration: none;
      transition: all 0.3s ease;
      text-align: center;
      width: 100%;
      margin-top: 15px;
    }

    body[data-theme="light"] .support-link {
      background: #000000;
      color: #ffffff;
    }

    .support-link:active {
      transform: scale(0.98);
    }

    /* Пустое состояние */
    .empty-state {
      text-align: center;
      color: #999999;
      margin: 40px 0;
      font-size: 14px;
    }

    body[data-theme="light"] .empty-state {
      color: #666666;
    }

    /* Адаптивность */
    @media (max-width: 360px) {
      .top-bar {
        padding: 0 8px;
        gap: 6px;
      }
      
      .search-container {
        max-width: 70px;
      }
      
      .screen {
        padding: 12px;
      }
      
      .logo {
        font-size: 26px;
        margin: 20px 0 15px;
      }
      
      .btn {
        padding: 12px 16px;
        font-size: 14px;
      }

      .news-section {
        margin: 15px 0 25px;
      }

      .news-carousel {
        height: 100px;
      }

      .news-slide {
        padding: 10px;
      }

      .news-slide h3 {
        font-size: 13px;
      }

      .news-slide p {
        font-size: 11px;
      }
    }
</style>
</head>
<body>
<!-- Верхняя панель -->
<div class="top-bar">
  <!-- Переключатель языков -->
  <select class="language-select" id="language-select">
    <option value="ru">RU</option>
    <option value="en">EN</option>
    <option value="uk">UA</option>
    <option value="de">DE</option>
  </select>

  <!-- Поиск без иконки лупы -->
  <div class="search-container">
    <input type="text" class="search-input" placeholder="Поиск..." id="search-input">
  </div>

  <!-- Кнопка фильтров -->
  <div class="filters-button" id="filters-button">
    ФИЛЬТР
    <div class="filters-dropdown" id="filters-dropdown">
      <div class="filter-group">
        <label class="filter-label">Цена</label>
        <select class="filter-select" id="price-filter">
          <option value="">Все</option>
          <option value="0-30">€0-30</option>
          <option value="30-60">€30-60</option>
          <option value="60-100">€60-100</option>
          <option value="100+">€100+</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label class="filter-label">Размер</label>
        <select class="filter-select" id="size-filter">
          <option value="">Все</option>
          <option value="XS">XS</option>
          <option value="S">S</option>
          <option value="M">M</option>
          <option value="L">L</option>
          <option value="XL">XL</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label class="filter-label">Бренд</label>
        <select class="filter-select" id="brand-filter">
          <option value="">Все</option>
          <option value="Nike">Nike</option>
          <option value="Adidas">Adidas</option>
          <option value="Jordan">Jordan</option>
          <option value="Premium">Premium</option>
        </select>
      </div>
    </div>
  </div>

  <div class="top-bar-right">
    <!-- Переключатель темы -->
    <button class="theme-toggle" id="theme-toggle">🌙</button>
    
    <!-- Корзина -->
    <button class="cart-button" id="cart-button">
      🛒
      <span class="cart-count" id="cart-count" style="display: none;">0</span>
    </button>
  </div>
</div>

<!-- Модальное окно для выбора товара -->
<div class="modal" id="product-modal">
  <div class="modal-content">
    <div class="modal-title" id="modal-title">Выберите опции</div>
    
    <div class="modal-group">
      <label class="modal-label">Размер</label>
      <select class="modal-select" id="modal-size">
        <!-- Опции будут добавлены динамически -->
      </select>
    </div>
    
    <div class="modal-group">
      <label class="modal-label">Количество</label>
      <input type="number" class="modal-input" id="modal-quantity" min="1" value="1">
    </div>
    
    <div class="modal-buttons">
      <button class="modal-btn secondary" onclick="closeModal()">Отмена</button>
      <button class="modal-btn primary" onclick="confirmAddToCart()">Добавить</button>
    </div>
  </div>
</div>

<div class="container">
  <!-- Главный экран -->
  <div class="screen active" id="home">
    <div class="logo">The Continental</div>
    
    <!-- Раздел новостей -->
    <div class="news-section">
      <div class="news-carousel">
        <div class="news-slides" id="news-slides">
          <div class="news-slide">
            <h3 data-key="news1_title">Новая коллекция весна-лето 2025</h3>
            <p data-key="news1_text">Эксклюзивные модели от ведущих брендов уже в наличии. Ограниченная серия!</p>
          </div>
          <div class="news-slide">
            <h3 data-key="news2_title">Скидки до 30% на аксессуары</h3>
            <p data-key="news2_text">Специальное предложение на все аксессуары. Акция действует до конца месяца.</p>
          </div>
          <div class="news-slide">
            <h3 data-key="news3_title">Быстрая доставка по Европе</h3>
            <p data-key="news3_text">Теперь доставляем заказы еще быстрее - от 5 до 10 рабочих дней.</p>
          </div>
        </div>
      </div>
      <div class="news-indicators" id="news-indicators">
        <div class="news-indicator active" onclick="goToSlide(0)"></div>
        <div class="news-indicator" onclick="goToSlide(1)"></div>
        <div class="news-indicator" onclick="goToSlide(2)"></div>
      </div>
    </div>

    <button class="btn" data-key="mens_btn" onclick="openScreen('mens')">Мужское</button>
    <button class="btn" data-key="womens_btn" onclick="openScreen('womens')">Женское</button>
    <button class="btn" data-key="terms_btn" onclick="openScreen('terms')">Условия работы</button>
    <button class="btn" data-key="support_btn" onclick="openScreen('support')">Поддержка</button>
    <button class="btn" data-key="social_btn" onclick="openScreen('social')">Мы в соцсетях</button>
  </div>

  <!-- Мужская одежда -->
  <div class="screen" id="mens">
    <div class="header">
      <button class="back" onclick="backToHome()">←</button>
      <h1 data-key="mens_title">Мужское</h1>
    </div>
    <button class="btn" data-key="mens_tshirts_btn" onclick="openScreen('mens-tshirts')">Футболки</button>
    <button class="btn" data-key="mens_shorts_btn" onclick="openScreen('mens-shorts')">Шорты</button>
    <button class="btn" data-key="mens_pants_btn" onclick="openScreen('mens-pants')">Штаны</button>
    <button class="btn" data-key="mens_accessories_btn" onclick="openScreen('mens-accessories')">Аксессуары</button>
  </div>

  <!-- Женская одежда -->
  <div class="screen" id="womens">
    <div class="header">
      <button class="back" onclick="backToHome()">←</button>
      <h1 data-key="womens_title">Женское</h1>
    </div>
    <button class="btn" data-key="womens_tshirts_btn" onclick="openScreen('womens-tshirts')">Футболки</button>
    <button class="btn" data-key="womens_shorts_btn" onclick="openScreen('womens-shorts')">Шорты</button>
    <button class="btn" data-key="womens_pants_btn" onclick="openScreen('womens-pants')">Штаны</button>
    <button class="btn" data-key="womens_accessories_btn" onclick="openScreen('womens-accessories')">Аксессуары</button>
  </div>

  <!-- Социальные сети -->
  <div class="screen" id="social">
    <div class="header">
      <button class="back" onclick="backToHome()">←</button>
      <h1 data-key="social_title">Мы в соцсетях</h1>
    </div>
    <p data-key="social_text" style="margin-bottom: 20px; color: #999999; line-height: 1.5; text-align: center;">
      Подписывайтесь на наши социальные сети, чтобы быть в курсе всех новинок и специальных предложений!
    </p>
    <button class="social-btn" data-key="instagram_btn" onclick="openSocialLink('https://instagram.com/continental_store_random')">
      📷 Instagram
    </button>
    <button class="social-btn" data-key="tiktok_btn" onclick="openSocialLink('https://tiktok.com/@continental_random')">
      🎵 TikTok
    </button>
    <button class="social-btn" data-key="whatsapp_btn" onclick="openSocialLink('https://wa.me/1234567890')">
      💬 WhatsApp
    </button>
    <button class="social-btn" data-key="viber_btn" onclick="openSocialLink('viber://chat?number=1234567890')">
      📞 Viber
    </button>
    <button class="social-btn" data-key="telegram_btn" onclick="openSocialLink('https://t.me/continental_random')">
      ✈️ Telegram
    </button>
  </div>



  <!-- Мужские футболки -->
  <div class="screen" id="mens-tshirts">
    <div class="header">
      <button class="back" onclick="openScreen('mens')">←</button>
      <h1 data-key="mens_tshirts_title">Мужские футболки</h1>
    </div>
    <div id="mens-tshirts-content">
      <!-- Товары будут загружены через JavaScript -->
    </div>
    <div class="pagination" id="mens-tshirts-pagination">
      <!-- Пагинация будет загружена через JavaScript -->
    </div>
  </div>

  <!-- Мужские шорты -->
  <div class="screen" id="mens-shorts">
    <div class="header">
      <button class="back" onclick="openScreen('mens')">←</button>
      <h1 data-key="mens_shorts_title">Мужские шорты</h1>
    </div>
    <div id="mens-shorts-content">
      <!-- Товары будут загружены через JavaScript -->
    </div>
    <div class="pagination" id="mens-shorts-pagination">
      <!-- Пагинация будет загружена через JavaScript -->
    </div>
  </div>

  <!-- Мужские штаны -->
  <div class="screen" id="mens-pants">
    <div class="header">
      <button class="back" onclick="openScreen('mens')">←</button>
      <h1 data-key="mens_pants_title">Мужские штаны</h1>
    </div>
    <div id="mens-pants-content">
      <!-- Товары будут загружены через JavaScript -->
    </div>
    <div class="pagination" id="mens-pants-pagination">
      <!-- Пагинация будет загружена через JavaScript -->
    </div>
  </div>

  <!-- Мужские аксессуары -->
  <div class="screen" id="mens-accessories">
    <div class="header">
      <button class="back" onclick="openScreen('mens')">←</button>
      <h1 data-key="mens_accessories_title">Мужские аксессуары</h1>
    </div>
    <div id="mens-accessories-content">
      <!-- Товары будут загружены через JavaScript -->
    </div>
    <div class="pagination" id="mens-accessories-pagination">
      <!-- Пагинация будет загружена через JavaScript -->
    </div>
  </div>

  <!-- Женские футболки -->
  <div class="screen" id="womens-tshirts">
    <div class="header">
      <button class="back" onclick="openScreen('womens')">←</button>
      <h1 data-key="womens_tshirts_title">Женские футболки</h1>
    </div>
    <div id="womens-tshirts-content">
      <!-- Товары будут загружены через JavaScript -->
    </div>
    <div class="pagination" id="womens-tshirts-pagination">
      <!-- Пагинация будет загружена через JavaScript -->
    </div>
  </div>

  <!-- Женские шорты -->
  <div class="screen" id="womens-shorts">
    <div class="header">
      <button class="back" onclick="openScreen('womens')">←</button>
      <h1 data-key="womens_shorts_title">Женские шорты</h1>
    </div>
    <div id="womens-shorts-content">
      <!-- Товары будут загружены через JavaScript -->
    </div>
    <div class="pagination" id="womens-shorts-pagination">
      <!-- Пагинация будет загружена через JavaScript -->
    </div>
  </div>

  <!-- Женские штаны -->
  <div class="screen" id="womens-pants">
    <div class="header">
      <button class="back" onclick="openScreen('womens')">←</button>
      <h1 data-key="womens_pants_title">Женские штаны</h1>
    </div>
    <div id="womens-pants-content">
      <!-- Товары будут загружены через JavaScript -->
    </div>
    <div class="pagination" id="womens-pants-pagination">
      <!-- Пагинация будет загружена через JavaScript -->
    </div>
  </div>

  <!-- Женские аксессуары -->
  <div class="screen" id="womens-accessories">
    <div class="header">
      <button class="back" onclick="openScreen('womens')">←</button>
      <h1 data-key="womens_accessories_title">Женские аксессуары</h1>
    </div>
    <div id="womens-accessories-content">
      <!-- Товары будут загружены через JavaScript -->
    </div>
    <div class="pagination" id="womens-accessories-pagination">
      <!-- Пагинация будет загружена через JavaScript -->
    </div>
  </div>

  <!-- Корзина -->
  <div class="screen" id="cart">
    <div class="header">
      <button class="back" onclick="backToHome()">←</button>
      <h1 data-key="cart_title">Корзина</h1>
    </div>
    <div id="cart-content">
      <div class="empty-state">Корзина пуста</div>
    </div>
    <div id="cart-total" style="display: none;" class="cart-total">
      <div class="total-row">
        <span>Итого:</span>
        <span id="total-price">€0.00</span>
      </div>
      <button class="checkout-btn" onclick="checkout()">Оформить заказ</button>
    </div>
  </div>

  <!-- Условия работы -->
  <div class="screen" id="terms">
    <div class="header">
      <button class="back" onclick="backToHome()">←</button>
      <h1 data-key="terms_title">Условия работы</h1>
    </div>
    <div class="terms-content" data-key="terms_content">
      <p><strong>Добро пожаловать в The Continental!</strong></p>
      <p>Мы предлагаем только премиум-реплики высочайшего качества. Каждый товар проходит строгий контроль качества перед отправкой.</p>
      <p><strong>Условия заказа:</strong></p>
      <p>• Оплата — 100% предоплата<br/>
      • Доставка по Европе — 7-14 рабочих дней<br/>
      • Возвратов и обменов нет<br/>
      • Гарантия качества на все товары</p>
      <p>Мы работаем только с проверенными поставщиками и гарантируем соответствие товара описанию.</p>
    </div>
  </div>

  <!-- Поддержка -->
  <div class="screen" id="support">
    <div class="header">
      <button class="back" onclick="backToHome()">←</button>
      <h1 data-key="support_title">Поддержка</h1>
    </div>
    <p data-key="support_text" style="margin-bottom: 20px; color: #999999; line-height: 1.5; text-align: center;">
      Наши менеджеры готовы ответить на все ваши вопросы и помочь с выбором товара. Мы работаем 24/7 для вашего удобства.
    </p>
    <a class="support-link" data-key="contact_manager_btn" href="https://t.me/a6tribunal" target="_blank">НАПИСАТЬ МЕНЕДЖЕРУ</a>
  </div>
</div>

<script>
// Инициализация Telegram Web App
let tg = window.Telegram?.WebApp;
if (tg) {
  tg.expand();
}

// Глобальные переменные
let currentTheme = 'dark';
let cart = [];
let currentPage = 1;
let itemsPerPage = 5;
let currentCategory = '';
let filteredProducts = [];
let selectedProduct = null;
let currentSlide = 0;
let newsInterval;

// Данные товаров (100 товаров для каждой категории)
const products = {
  'mens-tshirts': generateProducts('Мужская футболка', 100),
  'mens-shorts': generateProducts('Мужские шорты', 100),
  'mens-pants': generateProducts('Мужские штаны', 100),
  'mens-accessories': generateProducts('Мужской аксессуар', 100),
  'womens-tshirts': generateProducts('Женская футболка', 100),
  'womens-shorts': generateProducts('Женские шорты', 100),
  'womens-pants': generateProducts('Женские штаны', 100),
  'womens-accessories': generateProducts('Женский аксессуар', 100)
};

// Функция генерации товаров
function generateProducts(baseName, count) {
  const brands = ['Nike', 'Adidas', 'Jordan', 'Premium'];
  const sizes = ['XS', 'S', 'M', 'L', 'XL'];
  
  return Array.from({length: count}, (_, i) => ({
    id: i + 1,
    name: `${baseName} ${i + 1}`,
    description: `Высококачественный ${baseName.toLowerCase()} из премиальных материалов`,
    price: Math.round((Math.random() * 100 + 20) * 100) / 100,
    sizes: sizes.slice(Math.floor(Math.random() * 2), Math.floor(Math.random() * 3) + 3),
    stock: Math.floor(Math.random() * 20) + 1,
    brand: brands[Math.floor(Math.random() * brands.length)],
    image: 'placeholder'
  }));
}

// Объект с переводами
const translations = {
  ru: {
    mens_btn: "Мужское",
    womens_btn: "Женское", 
    terms_btn: "Условия работы",
    support_btn: "Поддержка",
    social_btn: "Мы в соцсетях",
    news1_title: "Новая коллекция весна-лето 2025",
    news1_text: "Эксклюзивные модели от ведущих брендов уже в наличии. Ограниченная серия!",
    news2_title: "Скидки до 30% на аксессуары",
    news2_text: "Специальное предложение на все аксессуары. Акция действует до конца месяца.",
    news3_title: "Быстрая доставка по Европе",
    news3_text: "Теперь доставляем заказы еще быстрее - от 5 до 10 рабочих дней.",
    social_title: "Мы в соцсетях",
    social_text: "Подписывайтесь на наши социальные сети, чтобы быть в курсе всех новинок и специальных предложений!",
    instagram_btn: "📷 Instagram",
    tiktok_btn: "🎵 TikTok",
    whatsapp_btn: "💬 WhatsApp",
    viber_btn: "📞 Viber",
    telegram_btn: "✈️ Telegram",
    mens_title: "Мужское",
    womens_title: "Женское",
    mens_tshirts_btn: "Футболки",
    mens_shorts_btn: "Шорты",
    mens_pants_btn: "Штаны",
    mens_accessories_btn: "Аксессуары",
    womens_tshirts_btn: "Футболки",
    womens_shorts_btn: "Шорты", 
    womens_pants_btn: "Штаны",
    womens_accessories_btn: "Аксессуары",
    mens_tshirts_title: "Мужские футболки",
    mens_shorts_title: "Мужские шорты",
    mens_pants_title: "Мужские штаны",
    mens_accessories_title: "Мужские аксессуары",
    womens_tshirts_title: "Женские футболки",
    womens_shorts_title: "Женские шорты",
    womens_pants_title: "Женские штаны",
    womens_accessories_title: "Женские аксессуары",
    cart_title: "Корзина",
    terms_title: "Условия работы",
    terms_content: `
      <p><strong>Добро пожаловать в The Continental!</strong></p>
      <p>Мы предлагаем только премиум-реплики высочайшего качества. Каждый товар проходит строгий контроль качества перед отправкой.</p>
      <p><strong>Условия заказа:</strong></p>
      <p>• Оплата — 100% предоплата<br>
      • Доставка по Европе — 7-14 рабочих дней<br>
      • Возвратов и обменов нет<br>
      • Гарантия качества на все товары</p>
      <p>Мы работаем только с проверенными поставщиками и гарантируем соответствие товара описанию.</p>
    `,
    support_title: "Поддержка",
    support_text: "Наши менеджеры готовы ответить на все ваши вопросы и помочь с выбором товара. Мы работаем 24/7 для вашего удобства.",
    contact_manager_btn: "НАПИСАТЬ МЕНЕДЖЕРУ"
  },
  en: {
    mens_btn: "Men's",
    womens_btn: "Women's",
    terms_btn: "Terms of Service", 
    support_btn: "Support",
    social_btn: "Follow Us",
    news1_title: "New Spring-Summer 2025 Collection",
    news1_text: "Exclusive models from leading brands are now available. Limited series!",
    news2_title: "Up to 30% off accessories",
    news2_text: "Special offer on all accessories. Promotion valid until the end of the month.",
    news3_title: "Fast delivery across Europe",
    news3_text: "We now deliver orders even faster - from 5 to 10 business days.",
    social_title: "Follow Us",
    social_text: "Follow our social networks to stay updated on all new arrivals and special offers!",
    instagram_btn: "📷 Instagram",
    tiktok_btn: "🎵 TikTok",
    whatsapp_btn: "💬 WhatsApp",
    viber_btn: "📞 Viber",
    telegram_btn: "✈️ Telegram",
    mens_title: "Men's",
    womens_title: "Women's",
    mens_tshirts_btn: "T-Shirts",
    mens_shorts_btn: "Shorts",
    mens_pants_btn: "Pants",
    mens_accessories_btn: "Accessories",
    womens_tshirts_btn: "T-Shirts",
    womens_shorts_btn: "Shorts",
    womens_pants_btn: "Pants", 
    womens_accessories_btn: "Accessories",
    mens_tshirts_title: "Men's T-Shirts",
    mens_shorts_title: "Men's Shorts",
    mens_pants_title: "Men's Pants",
    mens_accessories_title: "Men's Accessories",
    womens_tshirts_title: "Women's T-Shirts",
    womens_shorts_title: "Women's Shorts",
    womens_pants_title: "Women's Pants",
    womens_accessories_title: "Women's Accessories",
    cart_title: "Cart",
    terms_title: "Terms of Service",
    terms_content: `
      <p><strong>Welcome to The Continental!</strong></p>
      <p>We offer only premium replicas of the highest quality. Each item undergoes strict quality control before shipping.</p>
      <p><strong>Order Conditions:</strong></p>
      <p>• Payment — 100% prepayment<br>
      • Delivery within Europe — 7-14 business days<br>
      • No returns or exchanges<br>
      • Quality guarantee for all items</p>
      <p>We work only with trusted suppliers and guarantee that the product matches the description.</p>
    `,
    support_title: "Support",
    support_text: "Our managers are ready to answer all your questions and help you choose a product. We work 24/7 for your convenience.",
    contact_manager_btn: "CONTACT MANAGER"
  },
  uk: {
    mens_btn: "Чоловіче",
    womens_btn: "Жіноче",
    terms_btn: "Умови роботи",
    support_btn: "Підтримка",
    social_btn: "Ми в соцмережах",
    news1_title: "Нова колекція весна-літо 2025",
    news1_text: "Ексклюзивні моделі від провідних брендів вже в наявності. Обмежена серія!",
    news2_title: "Знижки до 30% на аксесуари",
    news2_text: "Спеціальна пропозиція на всі аксесуари. Акція діє до кінця місяця.",
    news3_title: "Швидка доставка по Європі",
    news3_text: "Тепер доставляємо замовлення ще швидше - від 5 до 10 робочих днів.",
    social_title: "Ми в соцмережах",
    social_text: "Підписуйтесь на наші соціальні мережі, щоб бути в курсі всіх новинок та спеціальних пропозицій!",
    instagram_btn: "📷 Instagram",
    tiktok_btn: "🎵 TikTok",
    whatsapp_btn: "💬 WhatsApp",
    viber_btn: "📞 Viber",
    telegram_btn: "✈️ Telegram",
    mens_title: "Чоловіче",
    womens_title: "Жіноче",
    mens_tshirts_btn: "Футболки",
    mens_shorts_btn: "Шорти",
    mens_pants_btn: "Штани",
    mens_accessories_btn: "Аксесуари",
    womens_tshirts_btn: "Футболки",
    womens_shorts_btn: "Шорти",
    womens_pants_btn: "Штани",
    womens_accessories_btn: "Аксесуари",
    mens_tshirts_title: "Чоловічі футболки",
    mens_shorts_title: "Чоловічі шорти",
    mens_pants_title: "Чоловічі штани",
    mens_accessories_title: "Чоловічі аксесуари",
    womens_tshirts_title: "Жіночі футболки",
    womens_shorts_title: "Жіночі шорти",
    womens_pants_title: "Жіночі штани",
    womens_accessories_title: "Жіночі аксесуари",
    cart_title: "Кошик",
    terms_title: "Умови роботи",
    terms_content: `
      <p><strong>Ласкаво просимо до The Continental!</strong></p>
      <p>Ми пропонуємо лише преміум-репліки найвищої якості. Кожен товар проходить суворий контроль якості перед відправкою.</p>
      <p><strong>Умови замовлення:</strong></p>
      <p>• Оплата — 100% передоплата<br>
      • Доставка по Європі — 7-14 робочих днів<br>
      • Повернень та обмінів немає<br>
      • Гарантія якості на всі товари</p>
      <p>Ми працюємо лише з перевіреними постачальниками та гарантуємо відповідність товару опису.</p>
    `,
    support_title: "Підтримка",
    support_text: "Наші менеджери готові відповісти на всі ваші запитання та допомогти з вибором товару. Ми працюємо 24/7 для вашої зручності.",
    contact_manager_btn: "НАПИСАТИ МЕНЕДЖЕРУ"
  },
  de: {
    mens_btn: "Herren",
    womens_btn: "Damen",
    terms_btn: "Nutzungsbedingungen",
    support_btn: "Support",
    social_btn: "Folgen Sie uns",
    news1_title: "Neue Frühjahr-Sommer 2025 Kollektion",
    news1_text: "Exklusive Modelle führender Marken sind jetzt verfügbar. Limitierte Serie!",
    news2_title: "Bis zu 30% Rabatt auf Accessoires",
    news2_text: "Sonderangebot für alle Accessoires. Aktion gültig bis Ende des Monats.",
    news3_title: "Schnelle Lieferung in ganz Europa",
    news3_text: "Wir liefern Bestellungen jetzt noch schneller - von 5 bis 10 Werktagen.",
    social_title: "Folgen Sie uns",
    social_text: "Folgen Sie unseren sozialen Netzwerken, um über alle Neuheiten und Sonderangebote informiert zu bleiben!",
    instagram_btn: "📷 Instagram",
    tiktok_btn: "🎵 TikTok",
    whatsapp_btn: "💬 WhatsApp",
    viber_btn: "📞 Viber",
    telegram_btn: "✈️ Telegram",
    mens_title: "Herren",
    womens_title: "Damen",
    mens_tshirts_btn: "T-Shirts",
    mens_shorts_btn: "Shorts",
    mens_pants_btn: "Hosen",
    mens_accessories_btn: "Accessoires",
    womens_tshirts_btn: "T-Shirts",
    womens_shorts_btn: "Shorts",
    womens_pants_btn: "Hosen",
    womens_accessories_btn: "Accessoires",
    mens_tshirts_title: "Herren T-Shirts",
    mens_shorts_title: "Herren Shorts",
    mens_pants_title: "Herren Hosen",
    mens_accessories_title: "Herren Accessoires",
    womens_tshirts_title: "Damen T-Shirts",
    womens_shorts_title: "Damen Shorts",
    womens_pants_title: "Damen Hosen",
    womens_accessories_title: "Damen Accessoires",
    cart_title: "Warenkorb",
    terms_title: "Nutzungsbedingungen",
    terms_content: `
      <p><strong>Willkommen bei The Continental!</strong></p>
      <p>Wir bieten nur Premium-Replikas höchster Qualität. Jeder Artikel durchläuft eine strenge Qualitätskontrolle vor dem Versand.</p>
      <p><strong>Bestellbedingungen:</strong></p>
      <p>• Zahlung — 100% Vorauszahlung<br>
      • Lieferung innerhalb Europas — 7-14 Werktage<br>
      • Keine Rücksendungen oder Umtausch<br>
      • Qualitätsgarantie für alle Artikel</p>
      <p>Wir arbeiten nur mit vertrauenswürdigen Lieferanten und garantieren, dass das Produkt der Beschreibung entspricht.</p>
    `,
    support_title: "Support",
    support_text: "Unsere Manager sind bereit, alle Ihre Fragen zu beantworten und Ihnen bei der Produktauswahl zu helfen. Wir arbeiten 24/7 für Ihre Bequemlichkeit.",
    contact_manager_btn: "MANAGER KONTAKTIEREN"
  }
};

// Функции для работы с новостями
function initNewsCarousel() {
  startNewsAutoSlide();
}

function goToSlide(slideIndex) {
  currentSlide = slideIndex;
  updateNewsSlide();
  resetNewsAutoSlide();
}

function updateNewsSlide() {
  const slides = document.getElementById('news-slides');
  const indicators = document.querySelectorAll('.news-indicator');
  
  slides.style.transform = `translateX(-${currentSlide * 100}%)`;
  
  indicators.forEach((indicator, index) => {
    indicator.classList.toggle('active', index === currentSlide);
  });
}

function nextSlide() {
  currentSlide = (currentSlide + 1) % 3;
  updateNewsSlide();
}

function startNewsAutoSlide() {
  newsInterval = setInterval(nextSlide, 4000); // Меняем слайд каждые 4 секунды
}

function resetNewsAutoSlide() {
  clearInterval(newsInterval);
  startNewsAutoSlide();
}

// Функция для открытия социальных ссылок
function openSocialLink(url) {
  if (tg && tg.openLink) {
    tg.openLink(url);
  } else {
    window.open(url, '_blank');
  }
}

// Инициализация при загрузке страницы
document.addEventListener('DOMContentLoaded', function() {
  initLanguage();
  initTheme();
  initFilters();
  initCart();
  initNewsCarousel();
  
  // Загружаем товары для первой категории
  if (products['mens-tshirts']) {
    loadProducts('mens-tshirts');
  }
});

// Функция смены языка
function changeLanguage(lang) {
  const elements = document.querySelectorAll('[data-key]');
  elements.forEach(element => {
    const key = element.getAttribute('data-key');
    if (translations[lang] && translations[lang][key]) {
      if (element.innerHTML.includes('<')) {
        element.innerHTML = translations[lang][key];
      } else {
        element.textContent = translations[lang][key];
      }
    }
  });
  
  // Обновляем placeholder для поиска
  const searchInput = document.getElementById('search-input');
  const placeholders = {
    ru: 'Поиск...',
    en: 'Search...',
    uk: 'Пошук...',
    de: 'Suchen...'
  };
  if (searchInput && placeholders[lang]) {
    searchInput.placeholder = placeholders[lang];
  }
  
  // Обновляем текст кнопки фильтров
  const filtersButton = document.getElementById('filters-button');
  const filterTexts = {
    ru: 'ФИЛЬТР',
    en: 'FILTER',
    uk: 'ФІЛЬТР',
    de: 'FILTER'
  };
  if (filtersButton && filterTexts[lang]) {
    const dropdown = filtersButton.querySelector('.filters-dropdown');
    filtersButton.innerHTML = filterTexts[lang];
    if (dropdown) {
      filtersButton.appendChild(dropdown);
    }
  }
}

// Инициализация языка
function initLanguage() {
  const languageSelect = document.getElementById('language-select');
  languageSelect.addEventListener('change', function() {
    changeLanguage(this.value);
  });
  
  // Устанавливаем язык по умолчанию
  changeLanguage('ru');
}

// Функция смены темы
function toggleTheme() {
  currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
  document.body.setAttribute('data-theme', currentTheme);
  
  const themeToggle = document.getElementById('theme-toggle');
  themeToggle.textContent = currentTheme === 'dark' ? '🌙' : '☀️';
}

// Инициализация темы
function initTheme() {
  const themeToggle = document.getElementById('theme-toggle');
  themeToggle.addEventListener('click', toggleTheme);
}

// Функции навигации
function openScreen(screenId) {
  // Скрываем все экраны
  document.querySelectorAll('.screen').forEach(screen => {
    screen.classList.remove('active');
  });
  
  // Показываем нужный экран
  const targetScreen = document.getElementById(screenId);
  if (targetScreen) {
    targetScreen.classList.add('active');
    
    // Загружаем товары для категорий
    if (products[screenId]) {
      loadProducts(screenId);
    }
  }
}

function backToHome() {
  openScreen('home');
}

// Функции для работы с товарами
function loadProducts(category) {
  currentCategory = category;
  currentPage = 1;
  applyFilters();
}

function applyFilters() {
  const priceFilter = document.getElementById('price-filter').value;
  const sizeFilter = document.getElementById('size-filter').value;
  const brandFilter = document.getElementById('brand-filter').value;
  const searchQuery = document.getElementById('search-input').value.toLowerCase();
  
  let filtered = products[currentCategory] || [];
  
  // Фильтр по цене
  if (priceFilter) {
    if (priceFilter === '100+') {
      filtered = filtered.filter(p => p.price >= 100);
    } else {
      const [min, max] = priceFilter.split('-').map(Number);
      filtered = filtered.filter(p => p.price >= min && p.price <= max);
    }
  }
  
  // Фильтр по размеру
  if (sizeFilter) {
    filtered = filtered.filter(p => p.sizes.includes(sizeFilter));
  }
  
  // Фильтр по бренду
  if (brandFilter) {
    filtered = filtered.filter(p => p.brand === brandFilter);
  }
  
  // Поиск
  if (searchQuery) {
    filtered = filtered.filter(p => 
      p.name.toLowerCase().includes(searchQuery) ||
      p.description.toLowerCase().includes(searchQuery)
    );
  }
  
  filteredProducts = filtered;
  renderProducts();
  renderPagination();
}

function renderProducts() {
  const container = document.getElementById(`${currentCategory}-content`);
  if (!container) return;
  
  const startIndex = (currentPage - 1) * itemsPerPage;
  const endIndex = startIndex + itemsPerPage;
  const pageProducts = filteredProducts.slice(startIndex, endIndex);
  
  if (pageProducts.length === 0) {
    container.innerHTML = '<div class="empty-state">Товары не найдены</div>';
    return;
  }
  
  container.innerHTML = pageProducts.map(product => `
    <div class="product" onclick="selectProduct(${product.id}, '${currentCategory}')">
      <div class="product-image">Изображение товара</div>
      <div class="product-name">${product.name}</div>
      <div class="product-description">${product.description}</div>
      <div class="product-price">€${product.price}</div>
      <div class="product-details">
        <span>Бренд: ${product.brand}</span>
        <span>В наличии: ${product.stock}</span>
      </div>
      <button class="add-to-cart-btn" onclick="event.stopPropagation(); selectProduct(${product.id}, '${currentCategory}')">
        Добавить в корзину
      </button>
    </div>
  `).join('');
}

function renderPagination() {
  const container = document.getElementById(`${currentCategory}-pagination`);
  if (!container) return;
  
  const totalPages = Math.ceil(filteredProducts.length / itemsPerPage);
  
  if (totalPages <= 1) {
    container.innerHTML = '';
    return;
  }
  
  let paginationHTML = '';
  
  // Кнопка "Назад"
  paginationHTML += `<button ${currentPage === 1 ? 'disabled' : ''} onclick="changePage(${currentPage - 1})">‹</button>`;
  
  // Номера страниц
  for (let i = 1; i <= totalPages; i++) {
    if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {
      paginationHTML += `<button class="${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">${i}</button>`;
    } else if (i === currentPage - 2 || i === currentPage + 2) {
      paginationHTML += '<span>...</span>';
    }
  }
  
  // Кнопка "Вперед"
  paginationHTML += `<button ${currentPage === totalPages ? 'disabled' : ''} onclick="changePage(${currentPage + 1})">›</button>`;
  
  container.innerHTML = paginationHTML;
}

function changePage(page) {
  const totalPages = Math.ceil(filteredProducts.length / itemsPerPage);
  if (page >= 1 && page <= totalPages) {
    currentPage = page;
    renderProducts();
    renderPagination();
  }
}

// Функции для работы с корзиной
function selectProduct(productId, category) {
  const product = products[category].find(p => p.id === productId);
  if (!product) return;
  
  selectedProduct = { ...product, category };
  
  // Заполняем модальное окно
  document.getElementById('modal-title').textContent = product.name;
  
  const sizeSelect = document.getElementById('modal-size');
  sizeSelect.innerHTML = product.sizes.map(size => 
    `<option value="${size}">${size}</option>`
  ).join('');
  
  document.getElementById('modal-quantity').value = 1;
  
  // Показываем модальное окно
  document.getElementById('product-modal').classList.add('show');
}

function closeModal() {
  document.getElementById('product-modal').classList.remove('show');
  selectedProduct = null;
}

function confirmAddToCart() {
  if (!selectedProduct) return;
  
  const size = document.getElementById('modal-size').value;
  const quantity = parseInt(document.getElementById('modal-quantity').value);
  
  const cartItem = {
    id: Date.now(),
    productId: selectedProduct.id,
    category: selectedProduct.category,
    name: selectedProduct.name,
    price: selectedProduct.price,
    size: size,
    quantity: quantity,
    total: selectedProduct.price * quantity
  };
  
  cart.push(cartItem);
  updateCartDisplay();
  closeModal();
  
  // Показываем уведомление (можно добавить)
  if (tg && tg.showAlert) {
    tg.showAlert('Товар добавлен в корзину!');
  }
}

function updateCartDisplay() {
  const cartCount = document.getElementById('cart-count');
  const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
  
  if (totalItems > 0) {
    cartCount.textContent = totalItems;
    cartCount.style.display = 'flex';
  } else {
    cartCount.style.display = 'none';
  }
  
  renderCart();
}

function renderCart() {
  const cartContent = document.getElementById('cart-content');
  const cartTotal = document.getElementById('cart-total');
  
  if (cart.length === 0) {
    cartContent.innerHTML = '<div class="empty-state">Корзина пуста</div>';
    cartTotal.style.display = 'none';
    return;
  }
  
  cartContent.innerHTML = cart.map(item => `
    <div class="cart-item">
      <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">
        <div style="flex: 1;">
          <div style="font-weight: 600; margin-bottom: 4px;">${item.name}</div>
          <div style="font-size: 12px; color: #999;">Размер: ${item.size} | Количество: ${item.quantity}</div>
        </div>
        <button onclick="removeFromCart(${item.id})" style="background: #ff4444; color: white; border: none; border-radius: 4px; padding: 4px 8px; font-size: 12px; cursor: pointer;">×</button>
      </div>
      <div style="font-weight: 600;">€${item.total.toFixed(2)}</div>
    </div>
  `).join('');
  
  const totalPrice = cart.reduce((sum, item) => sum + item.total, 0);
  document.getElementById('total-price').textContent = `€${totalPrice.toFixed(2)}`;
  cartTotal.style.display = 'block';
}

function removeFromCart(itemId) {
  cart = cart.filter(item => item.id !== itemId);
  updateCartDisplay();
}

function checkout() {
  if (cart.length === 0) return;
  
  // Здесь можно добавить логику оформления заказа
  if (tg && tg.showAlert) {
    tg.showAlert('Функция оформления заказа будет добавлена позже');
  } else {
    alert('Функция оформления заказа будет добавлена позже');
  }
}

// Инициализация корзины
function initCart() {
  const cartButton = document.getElementById('cart-button');
  cartButton.addEventListener('click', () => openScreen('cart'));
}

// Инициализация фильтров
function initFilters() {
  const filtersButton = document.getElementById('filters-button');
  const filtersDropdown = document.getElementById('filters-dropdown');
  
  filtersButton.addEventListener('click', function(e) {
    e.stopPropagation();
    filtersDropdown.classList.toggle('show');
  });
  
  // Закрытие при клике вне меню
  document.addEventListener('click', function() {
    filtersDropdown.classList.remove('show');
  });
  
  // Предотвращаем закрытие при клике внутри меню
  filtersDropdown.addEventListener('click', function(e) {
    e.stopPropagation();
  });
  
  // Обработчики изменения фильтров
  document.getElementById('price-filter').addEventListener('change', applyFilters);
  document.getElementById('size-filter').addEventListener('change', applyFilters);
  document.getElementById('brand-filter').addEventListener('change', applyFilters);
  document.getElementById('search-input').addEventListener('input', applyFilters);
}

// Закрытие модального окна при клике вне его
document.addEventListener('click', function(e) {
  const modal = document.getElementById('product-modal');
  if (e.target === modal) {
    closeModal();
  }
});
</script>
</body>
</html>


