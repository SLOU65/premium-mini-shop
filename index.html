<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport"/>
<title>The Continental</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
    /* Используем системные шрифты для лучшей совместимости */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    }

    /* Анимация "плавания" для логотипа */
    @keyframes float {
      0%, 100% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-10px);
      }
    }

    /* CSS переменные для тем */
    :root {
      --tg-theme-bg-color: #000000;
      --tg-theme-text-color: #ffffff;
      --tg-theme-hint-color: #999999;
      --tg-theme-link-color: #ffffff;
      --tg-theme-button-color: #ffffff;
      --tg-theme-button-text-color: #000000;
      --tg-theme-secondary-bg-color: #1a1a1a;
      --header-bg: #ffffff;
      --header-text: #000000;
    }

    [data-theme="light"] {
      --tg-theme-bg-color: #ffffff;
      --tg-theme-text-color: #000000;
      --tg-theme-hint-color: #666666;
      --tg-theme-link-color: #000000;
      --tg-theme-button-color: #000000;
      --tg-theme-button-text-color: #ffffff;
      --tg-theme-secondary-bg-color: #f5f5f5;
      --header-bg: #000000;
      --header-text: #ffffff;
    }

    body {
      background-color: var(--tg-theme-bg-color);
      color: var(--tg-theme-text-color);
      overflow-x: hidden;
      min-height: 100vh;
      padding-top: 50px;
      transition: all 0.3s ease;
    }

    /* Новый дизайн верхней панели */
    .top-bar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 50px;
      background: linear-gradient(135deg, var(--header-bg) 0%, rgba(128, 128, 128, 0.1) 100%);
      color: var(--header-text);
      display: flex;
      align-items: center;
      padding: 0 12px;
      z-index: 1000;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      border-bottom: 1px solid rgba(128, 128, 128, 0.2);
      gap: 8px;
      backdrop-filter: blur(10px);
    }

    .language-select {
      background: rgba(128, 128, 128, 0.15);
      border: 1px solid rgba(128, 128, 128, 0.4);
      border-radius: 6px;
      padding: 4px 6px;
      color: var(--header-text);
      font-size: 11px;
      min-width: 38px;
      font-weight: 500;
    }

    /* Уменьшенный поиск без иконки лупы */
    .search-container {
      flex: 1;
      max-width: 90px; /* Уменьшено с 120px */
      background: rgba(128, 128, 128, 0.15);
      border: 1px solid rgba(128, 128, 128, 0.3);
      border-radius: 15px;
      padding: 5px 8px; /* Убрано место для иконки */
      display: flex;
      align-items: center;
      transition: all 0.3s ease;
    }

    .search-container:focus-within {
      background: rgba(128, 128, 128, 0.25);
      border-color: rgba(128, 128, 128, 0.5);
    }

    .search-input {
      background: transparent;
      border: none;
      outline: none;
      color: var(--header-text);
      font-size: 11px;
      width: 100%;
      font-weight: 400;
    }

    .search-input::placeholder {
      color: rgba(128, 128, 128, 0.7);
    }

    /* Кнопка фильтров с исправленной кликабельностью */
    .filters-button {
      background: rgba(128, 128, 128, 0.15);
      border: 1px solid rgba(128, 128, 128, 0.4);
      border-radius: 6px;
      padding: 5px 10px;
      color: var(--header-text);
      font-size: 10px;
      font-weight: 600;
      cursor: pointer;
      position: relative;
      transition: all 0.3s ease;
      user-select: none;
      z-index: 1001; /* Увеличен z-index для кликабельности */
    }

    .filters-button:hover {
      background: rgba(128, 128, 128, 0.25);
      transform: translateY(-1px);
    }

    .filters-button:active {
      transform: translateY(0);
      background: rgba(128, 128, 128, 0.3);
    }

    /* Выпадающее меню фильтров с исправленным z-index */
    .filters-dropdown {
      position: absolute;
      top: calc(100% + 5px);
      left: 0;
      background: var(--header-bg);
      border: 1px solid rgba(128, 128, 128, 0.4);
      border-radius: 8px;
      padding: 10px;
      display: none;
      z-index: 1002; /* Увеличен z-index */
      min-width: 160px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
      backdrop-filter: blur(10px);
    }

    .filters-dropdown.show {
      display: block;
      animation: fadeInDown 0.3s ease;
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .filter-group {
      margin-bottom: 10px;
    }

    .filter-group:last-child {
      margin-bottom: 0;
    }

    .filter-label {
      font-size: 10px;
      color: var(--header-text);
      margin-bottom: 4px;
      display: block;
      font-weight: 600;
    }

    .filter-select {
      background: rgba(128, 128, 128, 0.1);
      border: 1px solid rgba(128, 128, 128, 0.3);
      border-radius: 4px;
      padding: 4px 6px;
      color: var(--header-text);
      font-size: 10px;
      width: 100%;
      cursor: pointer;
    }

    .top-bar-right {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-left: auto;
    }

    .theme-toggle, .cart-button {
      background: rgba(128, 128, 128, 0.15);
      border: 1px solid rgba(128, 128, 128, 0.4);
      border-radius: 6px;
      padding: 5px 7px;
      cursor: pointer;
      color: var(--header-text);
      font-size: 13px;
      transition: all 0.3s ease;
      position: relative;
      font-weight: 500;
    }

    .theme-toggle:hover, .cart-button:hover {
      background: rgba(128, 128, 128, 0.25);
      transform: translateY(-1px);
    }

    .theme-toggle:active, .cart-button:active {
      transform: translateY(0);
    }

    .cart-count {
      position: absolute;
      top: -4px;
      right: -4px;
      background: #ff4444;
      color: white;
      border-radius: 50%;
      width: 16px;
      height: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 9px;
      font-weight: bold;
    }

    /* Основной контейнер */
    .container {
      width: 100%;
      max-width: 100vw;
      padding: 0;
      position: relative;
    }

    .screen {
      display: none;
      padding: 15px;
      min-height: calc(100vh - 50px);
    }

    .screen.active {
      display: block;
    }

    /* Логотип с анимацией плавания */
    .logo {
      font-family: serif;
      font-size: 32px;
      font-weight: 700;
      text-align: center;
      margin: 30px 0 40px;
      background: linear-gradient(135deg, var(--tg-theme-text-color) 0%, var(--tg-theme-hint-color) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: 2px;
      position: relative;
      animation: float 3s ease-in-out infinite;
    }

    .logo::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 50px;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--tg-theme-text-color), transparent);
    }

    /* Кнопки */
    .btn {
      background: var(--tg-theme-button-color);
      color: var(--tg-theme-button-text-color);
      padding: 14px 20px;
      margin: 8px 0;
      border: none;
      font-weight: 600;
      font-size: 15px;
      width: 100%;
      text-align: center;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
    }

    .btn:active {
      transform: scale(0.98);
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
    }

    /* Заголовки экранов */
    .header {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
      position: relative;
    }

    .back {
      position: absolute;
      left: 0;
      background: var(--tg-theme-secondary-bg-color);
      border: 1px solid rgba(128, 128, 128, 0.3);
      color: var(--tg-theme-text-color);
      font-size: 18px;
      width: 36px;
      height: 36px;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .back:active {
      transform: scale(0.95);
    }

    h1 {
      font-size: 20px;
      font-weight: 700;
      text-align: center;
      color: var(--tg-theme-text-color);
    }

    /* Товары */
    .product {
      background: var(--tg-theme-secondary-bg-color);
      border: 1px solid rgba(128, 128, 128, 0.2);
      padding: 15px;
      margin: 10px 0;
      border-radius: 12px;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .product:active {
      transform: scale(0.98);
      background: rgba(128, 128, 128, 0.1);
    }

    .product-image {
      width: 100%;
      height: 120px;
      background: #333;
      border-radius: 8px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #666;
      font-size: 12px;
    }

    .product-name {
      font-weight: 600;
      font-size: 16px;
      margin-bottom: 5px;
      color: var(--tg-theme-text-color);
    }

    .product-description {
      color: var(--tg-theme-hint-color);
      font-size: 13px;
      margin-bottom: 8px;
      line-height: 1.3;
    }

    .product-price {
      color: var(--tg-theme-text-color);
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .product-details {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      font-size: 11px;
      color: var(--tg-theme-hint-color);
    }

    .add-to-cart-btn {
      background: #007bff;
      color: white;
      padding: 8px 16px;
      border: none;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      transition: all 0.3s ease;
    }

    .add-to-cart-btn:active {
      transform: scale(0.98);
      background: #0056b3;
    }

    /* Модальное окно для выбора товара */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      padding: 20px;
    }

    .modal.show {
      display: flex;
    }

    .modal-content {
      background: var(--tg-theme-bg-color);
      border: 1px solid rgba(128, 128, 128, 0.3);
      border-radius: 15px;
      padding: 25px;
      max-width: 320px;
      width: 100%;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .modal-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 20px;
      text-align: center;
      color: var(--tg-theme-text-color);
    }

    .modal-group {
      margin-bottom: 18px;
    }

    .modal-label {
      font-size: 13px;
      color: var(--tg-theme-text-color);
      margin-bottom: 6px;
      display: block;
      font-weight: 500;
    }

    .modal-select, .modal-input {
      background: var(--tg-theme-secondary-bg-color);
      border: 1px solid rgba(128, 128, 128, 0.3);
      border-radius: 8px;
      padding: 10px;
      color: var(--tg-theme-text-color);
      font-size: 15px;
      width: 100%;
    }

    .modal-buttons {
      display: flex;
      gap: 12px;
      margin-top: 25px;
    }

    .modal-btn {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .modal-btn.primary {
      background: #007bff;
      color: white;
    }

    .modal-btn.secondary {
      background: var(--tg-theme-secondary-bg-color);
      color: var(--tg-theme-text-color);
      border: 1px solid rgba(128, 128, 128, 0.3);
    }

    .modal-btn:active {
      transform: scale(0.98);
    }

    /* Пагинация */
    .pagination {
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 20px 0;
      gap: 8px;
      flex-wrap: wrap;
    }

    .pagination button {
      background: var(--tg-theme-button-color);
      color: var(--tg-theme-button-text-color);
      border: 1px solid rgba(128, 128, 128, 0.3);
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.3s ease;
      min-width: 32px;
    }

    .pagination button.active {
      background: #007bff;
      color: white;
      border-color: #007bff;
    }

    .pagination button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .pagination button:active:not(:disabled) {
      transform: scale(0.95);
    }

    /* Корзина */
    .cart-item {
      background: var(--tg-theme-secondary-bg-color);
      border: 1px solid rgba(128, 128, 128, 0.2);
      padding: 12px;
      margin: 8px 0;
      border-radius: 10px;
    }

    .cart-total {
      border-top: 1px solid rgba(128, 128, 128, 0.3);
      padding-top: 15px;
      margin-top: 15px;
    }

    .total-row {
      display: flex;
      justify-content: space-between;
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 15px;
    }

    .checkout-btn {
      background: #28a745;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      transition: all 0.3s ease;
    }

    .checkout-btn:active {
      transform: scale(0.98);
      background: #1e7e34;
    }

    /* Условия работы */
    .terms-content {
      line-height: 1.5;
      color: var(--tg-theme-text-color);
      font-size: 14px;
      background: var(--tg-theme-secondary-bg-color);
      padding: 15px;
      border-radius: 10px;
      border: 1px solid rgba(128, 128, 128, 0.2);
    }

    .terms-content strong {
      color: var(--tg-theme-text-color);
    }

    /* Поддержка */
    .support-link {
      display: inline-block;
      background: var(--tg-theme-button-color);
      color: var(--tg-theme-button-text-color);
      padding: 12px 20px;
      border-radius: 10px;
      font-weight: 600;
      font-size: 14px;
      text-decoration: none;
      transition: all 0.3s ease;
      text-align: center;
      width: 100%;
      margin-top: 15px;
    }

    .support-link:active {
      transform: scale(0.98);
    }

    /* Пустое состояние */
    .empty-state {
      text-align: center;
      color: var(--tg-theme-hint-color);
      margin: 40px 0;
      font-size: 14px;
    }

    /* Адаптивность */
    @media (max-width: 360px) {
      .top-bar {
        padding: 0 8px;
        gap: 6px;
      }
      
      .search-container {
        max-width: 70px; /* Еще меньше для маленьких экранов */
      }
      
      .screen {
        padding: 12px;
      }
      
      .logo {
        font-size: 26px;
        margin: 25px 0 30px;
      }
      
      .btn {
        padding: 12px 16px;
        font-size: 14px;
      }
    }
</style>
</head>
<body>
<!-- Верхняя панель -->
<div class="top-bar">
  <!-- Переключатель языков -->
  <select class="language-select" id="language-select">
    <option value="ru">RU</option>
    <option value="en">EN</option>
    <option value="uk">UA</option>
    <option value="de">DE</option>
  </select>

  <!-- Поиск без иконки лупы -->
  <div class="search-container">
    <input type="text" class="search-input" placeholder="Поиск..." id="search-input">
  </div>

  <!-- Кнопка фильтров -->
  <div class="filters-button" id="filters-button">
    ФИЛЬТР
    <div class="filters-dropdown" id="filters-dropdown">
      <div class="filter-group">
        <label class="filter-label">Цена</label>
        <select class="filter-select" id="price-filter">
          <option value="">Все</option>
          <option value="0-30">€0-30</option>
          <option value="30-60">€30-60</option>
          <option value="60-100">€60-100</option>
          <option value="100+">€100+</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label class="filter-label">Размер</label>
        <select class="filter-select" id="size-filter">
          <option value="">Все</option>
          <option value="XS">XS</option>
          <option value="S">S</option>
          <option value="M">M</option>
          <option value="L">L</option>
          <option value="XL">XL</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label class="filter-label">Бренд</label>
        <select class="filter-select" id="brand-filter">
          <option value="">Все</option>
          <option value="Nike">Nike</option>
          <option value="Adidas">Adidas</option>
          <option value="Jordan">Jordan</option>
          <option value="Premium">Premium</option>
        </select>
      </div>
    </div>
  </div>

  <div class="top-bar-right">
    <!-- Переключатель темы -->
    <button class="theme-toggle" id="theme-toggle">🌙</button>
    
    <!-- Корзина -->
    <button class="cart-button" id="cart-button">
      🛒
      <span class="cart-count" id="cart-count" style="display: none;">0</span>
    </button>
  </div>
</div>

<!-- Модальное окно для выбора товара -->
<div class="modal" id="product-modal">
  <div class="modal-content">
    <div class="modal-title" id="modal-title">Выберите опции</div>
    
    <div class="modal-group">
      <label class="modal-label">Размер</label>
      <select class="modal-select" id="modal-size">
        <!-- Опции будут добавлены динамически -->
      </select>
    </div>
    
    <div class="modal-group">
      <label class="modal-label">Количество</label>
      <input type="number" class="modal-input" id="modal-quantity" min="1" value="1">
    </div>
    
    <div class="modal-buttons">
      <button class="modal-btn secondary" onclick="closeModal()">Отмена</button>
      <button class="modal-btn primary" onclick="confirmAddToCart()">Добавить</button>
    </div>
  </div>
</div>

<div class="container">
  <!-- Главный экран -->
  <div class="screen active" id="home">
    <div class="logo">The Continental</div>
    <button class="btn" data-key="mens_btn" onclick="openScreen('mens')">Мужское</button>
    <button class="btn" data-key="womens_btn" onclick="openScreen('womens')">Женское</button>
    <button class="btn" data-key="terms_btn" onclick="openScreen('terms')">Условия работы</button>
    <button class="btn" data-key="support_btn" onclick="openScreen('support')">Поддержка</button>
  </div>

  <!-- Мужская одежда -->
  <div class="screen" id="mens">
    <div class="header">
      <button class="back" onclick="backToHome()">←</button>
      <h1 data-key="mens_title">Мужское</h1>
    </div>
    <button class="btn" data-key="mens_tshirts_btn" onclick="openScreen('mens-tshirts')">Футболки</button>
    <button class="btn" data-key="mens_shorts_btn" onclick="openScreen('mens-shorts')">Шорты</button>
    <button class="btn" data-key="mens_pants_btn" onclick="openScreen('mens-pants')">Штаны</button>
    <button class="btn" data-key="mens_accessories_btn" onclick="openScreen('mens-accessories')">Аксессуары</button>
  </div>

  <!-- Женская одежда -->
  <div class="screen" id="womens">
    <div class="header">
      <button class="back" onclick="backToHome()">←</button>
      <h1 data-key="womens_title">Женское</h1>
    </div>
    <button class="btn" data-key="womens_tshirts_btn" onclick="openScreen('womens-tshirts')">Футболки</button>
    <button class="btn" data-key="womens_shorts_btn" onclick="openScreen('womens-shorts')">Шорты</button>
    <button class="btn" data-key="womens_pants_btn" onclick="openScreen('womens-pants')">Штаны</button>
    <button class="btn" data-key="womens_accessories_btn" onclick="openScreen('womens-accessories')">Аксессуары</button>
  </div>

  <!-- Мужские футболки -->
  <div class="screen" id="mens-tshirts">
    <div class="header">
      <button class="back" onclick="openScreen('mens')">←</button>
      <h1 data-key="mens_tshirts_title">Мужские футболки</h1>
    </div>
    <div id="mens-tshirts-content">
      <!-- Товары будут загружены через JavaScript -->
    </div>
    <div class="pagination" id="mens-tshirts-pagination">
      <!-- Пагинация будет загружена через JavaScript -->
    </div>
  </div>

  <!-- Мужские шорты -->
  <div class="screen" id="mens-shorts">
    <div class="header">
      <button class="back" onclick="openScreen('mens')">←</button>
      <h1 data-key="mens_shorts_title">Мужские шорты</h1>
    </div>
    <div id="mens-shorts-content">
      <!-- Товары будут загружены через JavaScript -->
    </div>
    <div class="pagination" id="mens-shorts-pagination">
      <!-- Пагинация будет загружена через JavaScript -->
    </div>
  </div>

  <!-- Мужские штаны -->
  <div class="screen" id="mens-pants">
    <div class="header">
      <button class="back" onclick="openScreen('mens')">←</button>
      <h1 data-key="mens_pants_title">Мужские штаны</h1>
    </div>
    <div id="mens-pants-content">
      <!-- Товары будут загружены через JavaScript -->
    </div>
    <div class="pagination" id="mens-pants-pagination">
      <!-- Пагинация будет загружена через JavaScript -->
    </div>
  </div>

  <!-- Мужские аксессуары -->
  <div class="screen" id="mens-accessories">
    <div class="header">
      <button class="back" onclick="openScreen('mens')">←</button>
      <h1 data-key="mens_accessories_title">Мужские аксессуары</h1>
    </div>
    <div id="mens-accessories-content">
      <!-- Товары будут загружены через JavaScript -->
    </div>
    <div class="pagination" id="mens-accessories-pagination">
      <!-- Пагинация будет загружена через JavaScript -->
    </div>
  </div>

  <!-- Женские футболки -->
  <div class="screen" id="womens-tshirts">
    <div class="header">
      <button class="back" onclick="openScreen('womens')">←</button>
      <h1 data-key="womens_tshirts_title">Женские футболки</h1>
    </div>
    <div id="womens-tshirts-content">
      <!-- Товары будут загружены через JavaScript -->
    </div>
    <div class="pagination" id="womens-tshirts-pagination">
      <!-- Пагинация будет загружена через JavaScript -->
    </div>
  </div>

  <!-- Женские шорты -->
  <div class="screen" id="womens-shorts">
    <div class="header">
      <button class="back" onclick="openScreen('womens')">←</button>
      <h1 data-key="womens_shorts_title">Женские шорты</h1>
    </div>
    <div id="womens-shorts-content">
      <!-- Товары будут загружены через JavaScript -->
    </div>
    <div class="pagination" id="womens-shorts-pagination">
      <!-- Пагинация будет загружена через JavaScript -->
    </div>
  </div>

  <!-- Женские штаны -->
  <div class="screen" id="womens-pants">
    <div class="header">
      <button class="back" onclick="openScreen('womens')">←</button>
      <h1 data-key="womens_pants_title">Женские штаны</h1>
    </div>
    <div id="womens-pants-content">
      <!-- Товары будут загружены через JavaScript -->
    </div>
    <div class="pagination" id="womens-pants-pagination">
      <!-- Пагинация будет загружена через JavaScript -->
    </div>
  </div>

  <!-- Женские аксессуары -->
  <div class="screen" id="womens-accessories">
    <div class="header">
      <button class="back" onclick="openScreen('womens')">←</button>
      <h1 data-key="womens_accessories_title">Женские аксессуары</h1>
    </div>
    <div id="womens-accessories-content">
      <!-- Товары будут загружены через JavaScript -->
    </div>
    <div class="pagination" id="womens-accessories-pagination">
      <!-- Пагинация будет загружена через JavaScript -->
    </div>
  </div>

  <!-- Корзина -->
  <div class="screen" id="cart">
    <div class="header">
      <button class="back" onclick="backToHome()">←</button>
      <h1 data-key="cart_title">Корзина</h1>
    </div>
    <div id="cart-content">
      <div class="empty-state">Корзина пуста</div>
    </div>
    <div id="cart-total" style="display: none;" class="cart-total">
      <div class="total-row">
        <span>Итого:</span>
        <span id="total-price">€0.00</span>
      </div>
      <button class="checkout-btn" onclick="checkout()">Оформить заказ</button>
    </div>
  </div>

  <!-- Условия работы -->
  <div class="screen" id="terms">
    <div class="header">
      <button class="back" onclick="backToHome()">←</button>
      <h1 data-key="terms_title">Условия работы</h1>
    </div>
    <div class="terms-content" data-key="terms_content">
      <p><strong>Добро пожаловать в The Continental!</strong></p>
      <p>Мы предлагаем только премиум-реплики высочайшего качества. Каждый товар проходит строгий контроль качества перед отправкой.</p>
      <p><strong>Условия заказа:</strong></p>
      <p>• Оплата — 100% предоплата<br/>
      • Доставка по Европе — 7-14 рабочих дней<br/>
      • Возвратов и обменов нет<br/>
      • Гарантия качества на все товары</p>
      <p>Мы работаем только с проверенными поставщиками и гарантируем соответствие товара описанию.</p>
    </div>
  </div>

  <!-- Поддержка -->
  <div class="screen" id="support">
    <div class="header">
      <button class="back" onclick="backToHome()">←</button>
      <h1 data-key="support_title">Поддержка</h1>
    </div>
    <p data-key="support_text" style="margin-bottom: 20px; color: var(--tg-theme-hint-color); line-height: 1.5; text-align: center;">
      Наши менеджеры готовы ответить на все ваши вопросы и помочь с выбором товара. Мы работаем 24/7 для вашего удобства.
    </p>
    <a class="support-link" data-key="contact_manager_btn" href="https://t.me/a6tribunal" target="_blank">НАПИСАТЬ МЕНЕДЖЕРУ</a>
  </div>
</div>

<script>
// Инициализация Telegram Web App
let tg = window.Telegram?.WebApp;
if (tg) {
  tg.expand();
}

// Глобальные переменные
let currentTheme = 'dark';
let cart = [];
let currentPage = 1;
let itemsPerPage = 5;
let currentCategory = '';
let filteredProducts = [];
let selectedProduct = null;

// Данные товаров (100 товаров для каждой категории)
const products = {
  'mens-tshirts': generateProducts('Мужская футболка', 100),
  'mens-shorts': generateProducts('Мужские шорты', 100),
  'mens-pants': generateProducts('Мужские штаны', 100),
  'mens-accessories': generateProducts('Мужской аксессуар', 100),
  'womens-tshirts': generateProducts('Женская футболка', 100),
  'womens-shorts': generateProducts('Женские шорты', 100),
  'womens-pants': generateProducts('Женские штаны', 100),
  'womens-accessories': generateProducts('Женский аксессуар', 100)
};

// Функция генерации товаров
function generateProducts(baseName, count) {
  const brands = ['Nike', 'Adidas', 'Jordan', 'Premium'];
  const sizes = ['XS', 'S', 'M', 'L', 'XL'];
  
  return Array.from({length: count}, (_, i) => ({
    id: i + 1,
    name: `${baseName} ${i + 1}`,
    description: `Высококачественный ${baseName.toLowerCase()} из премиальных материалов`,
    price: Math.round((Math.random() * 100 + 20) * 100) / 100,
    sizes: sizes.slice(Math.floor(Math.random() * 2), Math.floor(Math.random() * 3) + 3),
    stock: Math.floor(Math.random() * 20) + 1,
    brand: brands[Math.floor(Math.random() * brands.length)],
    image: 'placeholder'
  }));
}

// Объект с переводами
const translations = {
  ru: {
    mens_btn: "Мужское",
    womens_btn: "Женское", 
    terms_btn: "Условия работы",
    support_btn: "Поддержка",
    mens_title: "Мужское",
    womens_title: "Женское",
    mens_tshirts_btn: "Футболки",
    mens_shorts_btn: "Шорты",
    mens_pants_btn: "Штаны",
    mens_accessories_btn: "Аксессуары",
    womens_tshirts_btn: "Футболки",
    womens_shorts_btn: "Шорты", 
    womens_pants_btn: "Штаны",
    womens_accessories_btn: "Аксессуары",
    mens_tshirts_title: "Мужские футболки",
    mens_shorts_title: "Мужские шорты",
    mens_pants_title: "Мужские штаны",
    mens_accessories_title: "Мужские аксессуары",
    womens_tshirts_title: "Женские футболки",
    womens_shorts_title: "Женские шорты",
    womens_pants_title: "Женские штаны",
    womens_accessories_title: "Женские аксессуары",
    cart_title: "Корзина",
    terms_title: "Условия работы",
    terms_content: `
      <p><strong>Добро пожаловать в The Continental!</strong></p>
      <p>Мы предлагаем только премиум-реплики высочайшего качества. Каждый товар проходит строгий контроль качества перед отправкой.</p>
      <p><strong>Условия заказа:</strong></p>
      <p>• Оплата — 100% предоплата<br>
      • Доставка по Европе — 7-14 рабочих дней<br>
      • Возвратов и обменов нет<br>
      • Гарантия качества на все товары</p>
      <p>Мы работаем только с проверенными поставщиками и гарантируем соответствие товара описанию.</p>
    `,
    support_title: "Поддержка",
    support_text: "Наши менеджеры готовы ответить на все ваши вопросы и помочь с выбором товара. Мы работаем 24/7 для вашего удобства.",
    contact_manager_btn: "НАПИСАТЬ МЕНЕДЖЕРУ"
  },
  en: {
    mens_btn: "Men's",
    womens_btn: "Women's",
    terms_btn: "Terms of Service", 
    support_btn: "Support",
    mens_title: "Men's",
    womens_title: "Women's",
    mens_tshirts_btn: "T-Shirts",
    mens_shorts_btn: "Shorts",
    mens_pants_btn: "Pants",
    mens_accessories_btn: "Accessories",
    womens_tshirts_btn: "T-Shirts",
    womens_shorts_btn: "Shorts",
    womens_pants_btn: "Pants", 
    womens_accessories_btn: "Accessories",
    mens_tshirts_title: "Men's T-Shirts",
    mens_shorts_title: "Men's Shorts",
    mens_pants_title: "Men's Pants",
    mens_accessories_title: "Men's Accessories",
    womens_tshirts_title: "Women's T-Shirts",
    womens_shorts_title: "Women's Shorts",
    womens_pants_title: "Women's Pants",
    womens_accessories_title: "Women's Accessories",
    cart_title: "Cart",
    terms_title: "Terms of Service",
    terms_content: `
      <p><strong>Welcome to The Continental!</strong></p>
      <p>We offer only premium replicas of the highest quality. Each item undergoes strict quality control before shipping.</p>
      <p><strong>Order Conditions:</strong></p>
      <p>• Payment — 100% prepayment<br>
      • Delivery within Europe — 7-14 business days<br>
      • No returns or exchanges<br>
      • Quality guarantee for all items</p>
      <p>We work only with trusted suppliers and guarantee that the product matches the description.</p>
    `,
    support_title: "Support",
    support_text: "Our managers are ready to answer all your questions and help you choose a product. We work 24/7 for your convenience.",
    contact_manager_btn: "CONTACT MANAGER"
  },
  uk: {
    mens_btn: "Чоловіче",
    womens_btn: "Жіноче",
    terms_btn: "Умови роботи",
    support_btn: "Підтримка",
    mens_title: "Чоловіче",
    womens_title: "Жіноче",
    mens_tshirts_btn: "Футболки",
    mens_shorts_btn: "Шорти",
    mens_pants_btn: "Штани",
    mens_accessories_btn: "Аксесуари",
    womens_tshirts_btn: "Футболки",
    womens_shorts_btn: "Шорти",
    womens_pants_btn: "Штани",
    womens_accessories_btn: "Аксесуари",
    mens_tshirts_title: "Чоловічі футболки",
    mens_shorts_title: "Чоловічі шорти",
    mens_pants_title: "Чоловічі штани",
    mens_accessories_title: "Чоловічі аксесуари",
    womens_tshirts_title: "Жіночі футболки",
    womens_shorts_title: "Жіночі шорти",
    womens_pants_title: "Жіночі штани",
    womens_accessories_title: "Жіночі аксесуари",
    cart_title: "Кошик",
    terms_title: "Умови роботи",
    terms_content: `
      <p><strong>Ласкаво просимо до The Continental!</strong></p>
      <p>Ми пропонуємо лише преміум-репліки найвищої якості. Кожен товар проходить суворий контроль якості перед відправкою.</p>
      <p><strong>Умови замовлення:</strong></p>
      <p>• Оплата — 100% передоплата<br>
      • Доставка по Європі — 7-14 робочих днів<br>
      • Повернень та обмінів немає<br>
      • Гарантія якості на всі товари</p>
      <p>Ми працюємо лише з перевіреними постачальниками та гарантуємо відповідність товару опису.</p>
    `,
    support_title: "Підтримка",
    support_text: "Наші менеджери готові відповісти на всі ваші запитання та допомогти з вибором товару. Ми працюємо 24/7 для вашої зручності.",
    contact_manager_btn: "НАПИСАТИ МЕНЕДЖЕРУ"
  },
  de: {
    mens_btn: "Herren",
    womens_btn: "Damen",
    terms_btn: "Nutzungsbedingungen",
    support_btn: "Support",
    mens_title: "Herren",
    womens_title: "Damen",
    mens_tshirts_btn: "T-Shirts",
    mens_shorts_btn: "Shorts",
    mens_pants_btn: "Hosen",
    mens_accessories_btn: "Accessoires",
    womens_tshirts_btn: "T-Shirts",
    womens_shorts_btn: "Shorts",
    womens_pants_btn: "Hosen",
    womens_accessories_btn: "Accessoires",
    mens_tshirts_title: "Herren T-Shirts",
    mens_shorts_title: "Herren Shorts",
    mens_pants_title: "Herren Hosen",
    mens_accessories_title: "Herren Accessoires",
    womens_tshirts_title: "Damen T-Shirts",
    womens_shorts_title: "Damen Shorts",
    womens_pants_title: "Damen Hosen",
    womens_accessories_title: "Damen Accessoires",
    cart_title: "Warenkorb",
    terms_title: "Nutzungsbedingungen",
    terms_content: `
      <p><strong>Willkommen bei The Continental!</strong></p>
      <p>Wir bieten ausschließlich Premium-Repliken höchster Qualität an. Jeder Artikel wird vor dem Versand einer strengen Qualitätskontrolle unterzogen.</p>
      <p><strong>Bestellbedingungen:</strong></p>
      <p>• Zahlung — 100% Vorkasse<br>
      • Lieferung innerhalb Europas — 7-14 Werktage<br>
      • Keine Rückgabe oder Umtausch<br>
      • Qualitätsgarantie für alle Artikel</p>
      <p>Wir arbeiten nur mit vertrauenswürdigen Lieferanten zusammen und garantieren, dass das Produkt der Beschreibung entspricht.</p>
    `,
    support_title: "Support",
    support_text: "Unsere Manager stehen Ihnen jederzeit zur Verfügung, um Ihre Fragen zu beantworten und Ihnen bei der Produktauswahl zu helfen. Wir sind 24/7 für Sie da.",
    contact_manager_btn: "MANAGER KONTAKTIEREN"
  }
};

// Функция для применения переводов
function applyTranslations(lang) {
  const elements = document.querySelectorAll('[data-key]');
  elements.forEach(el => {
    const key = el.dataset.key;
    if (translations[lang] && translations[lang][key]) {
      if (key.includes('_content')) {
        el.innerHTML = translations[lang][key];
      } else {
        el.textContent = translations[lang][key];
      }
    }
  });
}

// Переключение фильтров
function toggleFilters() {
  const dropdown = document.getElementById('filters-dropdown');
  dropdown.classList.toggle('show');
}

// Переключение темы
function toggleTheme() {
  currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
  document.body.setAttribute('data-theme', currentTheme);
  document.getElementById('theme-toggle').textContent = currentTheme === 'dark' ? '🌙' : '☀️';
  
  // Уведомляем Telegram о смене темы
  if (tg && currentTheme === 'light') {
    tg.setHeaderColor && tg.setHeaderColor('#000000');
  } else if (tg) {
    tg.setHeaderColor && tg.setHeaderColor('#ffffff');
  }
}

// Функция для открытия нового экрана
function openScreen(id) {
  const currentScreen = document.querySelector('.screen.active');
  const target = document.getElementById(id);

  if (currentScreen) {
    currentScreen.classList.remove('active');
  }

  if (target) {
    target.classList.add('active');
    
    // Загружаем товары если это каталог
    if (id.includes('-') && products[id]) {
      currentCategory = id;
      applyFilters();
    }
  }
}

// Функция для возврата на главную
function backToHome() {
  openScreen('home');
}

// Применение фильтров
function applyFilters() {
  if (!currentCategory || !products[currentCategory]) return;
  
  const searchTerm = document.getElementById('search-input').value.toLowerCase();
  const priceFilter = document.getElementById('price-filter').value;
  const sizeFilter = document.getElementById('size-filter').value;
  const brandFilter = document.getElementById('brand-filter').value;
  
  filteredProducts = products[currentCategory].filter(product => {
    // Поиск по названию
    if (searchTerm && !product.name.toLowerCase().includes(searchTerm)) {
      return false;
    }
    
    // Фильтр по цене
    if (priceFilter) {
      const price = product.price;
      switch (priceFilter) {
        case '0-30':
          if (price < 0 || price > 30) return false;
          break;
        case '30-60':
          if (price < 30 || price > 60) return false;
          break;
        case '60-100':
          if (price < 60 || price > 100) return false;
          break;
        case '100+':
          if (price < 100) return false;
          break;
      }
    }
    
    // Фильтр по размеру
    if (sizeFilter && !product.sizes.includes(sizeFilter)) {
      return false;
    }
    
    // Фильтр по бренду
    if (brandFilter && product.brand !== brandFilter) {
      return false;
    }
    
    return true;
  });
  
  loadProducts(currentCategory, 1);
}

// Загрузка товаров с пагинацией
function loadProducts(category, page = 1) {
  const container = document.getElementById(`${category}-content`);
  const paginationContainer = document.getElementById(`${category}-pagination`);
  
  if (!container) return;
  
  const items = filteredProducts.length > 0 ? filteredProducts : (products[category] || []);
  const startIndex = (page - 1) * itemsPerPage;
  const endIndex = startIndex + itemsPerPage;
  const pageItems = items.slice(startIndex, endIndex);
  
  // Очищаем контейнер
  container.innerHTML = '';
  
  if (pageItems.length === 0) {
    container.innerHTML = '<div class="empty-state">Товары не найдены</div>';
    if (paginationContainer) paginationContainer.innerHTML = '';
    return;
  }
  
  // Добавляем товары
  pageItems.forEach(product => {
    const productElement = document.createElement('div');
    productElement.className = 'product';
    productElement.innerHTML = `
      <div class="product-image">Фото товара</div>
      <div class="product-name">${product.name}</div>
      <div class="product-description">${product.description}</div>
      <div class="product-price">€${product.price}</div>
      <div class="product-details">
        <div>Размеры: ${product.sizes.join(', ')}</div>
        <div>В наличии: ${product.stock}</div>
      </div>
      <button class="add-to-cart-btn" onclick="showProductModal(${product.id}, '${category}')">
        Добавить в корзину
      </button>
    `;
    container.appendChild(productElement);
  });
  
  // Создаем пагинацию
  createPagination(category, page, Math.ceil(items.length / itemsPerPage));
}

// Создание пагинации
function createPagination(category, currentPage, totalPages) {
  const container = document.getElementById(`${category}-pagination`);
  if (!container || totalPages <= 1) {
    if (container) container.innerHTML = '';
    return;
  }
  
  container.innerHTML = '';
  
  // Кнопка "Назад"
  const prevBtn = document.createElement('button');
  prevBtn.textContent = '←';
  prevBtn.disabled = currentPage === 1;
  prevBtn.onclick = () => loadProducts(category, currentPage - 1);
  container.appendChild(prevBtn);
  
  // Номера страниц (показываем максимум 5 страниц)
  const startPage = Math.max(1, currentPage - 2);
  const endPage = Math.min(totalPages, startPage + 4);
  
  for (let i = startPage; i <= endPage; i++) {
    const pageBtn = document.createElement('button');
    pageBtn.textContent = i;
    pageBtn.className = i === currentPage ? 'active' : '';
    pageBtn.onclick = () => loadProducts(category, i);
    container.appendChild(pageBtn);
  }
  
  // Кнопка "Вперед"
  const nextBtn = document.createElement('button');
  nextBtn.textContent = '→';
  nextBtn.disabled = currentPage === totalPages;
  nextBtn.onclick = () => loadProducts(category, currentPage + 1);
  container.appendChild(nextBtn);
}

// Показать модальное окно выбора товара
function showProductModal(productId, category) {
  const product = products[category].find(p => p.id === productId);
  if (!product) return;
  
  selectedProduct = { ...product, category };
  
  // Заполняем модальное окно
  document.getElementById('modal-title').textContent = product.name;
  
  const sizeSelect = document.getElementById('modal-size');
  sizeSelect.innerHTML = '';
  product.sizes.forEach(size => {
    const option = document.createElement('option');
    option.value = size;
    option.textContent = size;
    sizeSelect.appendChild(option);
  });
  
  document.getElementById('modal-quantity').value = 1;
  document.getElementById('modal-quantity').max = product.stock;
  
  // Показываем модальное окно
  document.getElementById('product-modal').classList.add('show');
}

// Закрыть модальное окно
function closeModal() {
  document.getElementById('product-modal').classList.remove('show');
  selectedProduct = null;
}

// Подтвердить добавление в корзину
function confirmAddToCart() {
  if (!selectedProduct) return;
  
  const size = document.getElementById('modal-size').value;
  const quantity = parseInt(document.getElementById('modal-quantity').value);
  
  if (!size || quantity < 1 || quantity > selectedProduct.stock) {
    alert('Проверьте выбранные параметры');
    return;
  }
  
  // Добавляем в корзину
  const cartItem = {
    ...selectedProduct,
    selectedSize: size,
    quantity: quantity,
    cartId: Date.now()
  };
  
  cart.push(cartItem);
  updateCartDisplay();
  closeModal();
  
  if (tg && tg.showAlert) {
    tg.showAlert('Товар добавлен в корзину!');
  } else {
    alert('Товар добавлен в корзину!');
  }
}

// Обновление отображения корзины
function updateCartDisplay() {
  const cartCount = document.getElementById('cart-count');
  const cartContent = document.getElementById('cart-content');
  const cartTotal = document.getElementById('cart-total');
  const totalPrice = document.getElementById('total-price');
  
  if (cart.length === 0) {
    cartCount.style.display = 'none';
    cartContent.innerHTML = '<div class="empty-state">Корзина пуста</div>';
    cartTotal.style.display = 'none';
  } else {
    cartCount.style.display = 'flex';
    cartCount.textContent = cart.length;
    
    // Отображаем товары в корзине
    cartContent.innerHTML = '';
    let total = 0;
    
    cart.forEach(item => {
      total += item.price * item.quantity;
      
      const cartItemElement = document.createElement('div');
      cartItemElement.className = 'cart-item';
      cartItemElement.innerHTML = `
        <div class="product-name">${item.name}</div>
        <div class="product-description">Размер: ${item.selectedSize}</div>
        <div class="product-price">€${item.price} x ${item.quantity} = €${(item.price * item.quantity).toFixed(2)}</div>
        <button class="add-to-cart-btn" style="background: #dc3545; margin-top: 8px;" onclick="removeFromCart(${item.cartId})">
          Удалить
        </button>
      `;
      cartContent.appendChild(cartItemElement);
    });
    
    totalPrice.textContent = `€${total.toFixed(2)}`;
    cartTotal.style.display = 'block';
  }
}

// Удаление товара из корзины
function removeFromCart(cartId) {
  cart = cart.filter(item => item.cartId !== cartId);
  updateCartDisplay();
  
  if (tg && tg.showAlert) {
    tg.showAlert('Товар удален из корзины');
  } else {
    alert('Товар удален из корзины');
  }
}

// Оформление заказа
function checkout() {
  if (cart.length === 0) {
    if (tg && tg.showAlert) {
      tg.showAlert('Корзина пуста');
    } else {
      alert('Корзина пуста');
    }
    return;
  }
  
  const currentLang = document.getElementById('language-select').value;
  const now = new Date();
  const date = now.toLocaleDateString('ru-RU');
  const time = now.toLocaleTimeString('ru-RU');
  
  let message = `*Новый заказ из The Continental*\n\n`;
  message += `📅 Дата: ${date}, ${time}\n`;
  message += `🌐 Язык: ${currentLang.toUpperCase()}\n`;
  message += `📊 Всего позиций: ${cart.length}\n\n`;
  message += `📦 *Детали заказа:*\n\n`;
  
  // Группируем товары по типам
  const groupedItems = {};
  cart.forEach(item => {
    const category = item.name.includes('футболка') ? 'Футболки' : 
                    item.name.includes('шорты') ? 'Шорты' :
                    item.name.includes('штаны') ? 'Штаны' : 'Аксессуары';
    if (!groupedItems[category]) {
      groupedItems[category] = [];
    }
    groupedItems[category].push(item);
  });
  
  let itemNumber = 1;
  Object.keys(groupedItems).forEach(category => {
    message += `👕 ${category}:\n`;
    groupedItems[category].forEach(item => {
      message += `  ${itemNumber}. ${item.name}\n`;
      message += `     Размер: ${item.selectedSize}\n`;
      message += `     Цена: €${item.price}\n\n`;
      itemNumber++;
    });
  });
  
  const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
  message += `💰 *Общая сумма: €${total.toFixed(2)}*`;
  
  // Отправляем данные через Telegram Web App или открываем ссылку
  if (tg && tg.sendData) {
    tg.sendData(JSON.stringify({
      type: 'order',
      message: message,
      cart: cart,
      total: total,
      language: currentLang
    }));
  } else {
    // Fallback - открываем Telegram с сообщением
    const encodedMessage = encodeURIComponent(message);
    const telegramUrl = `https://t.me/a6tribunal?text=${encodedMessage}`;
    window.open(telegramUrl, '_blank');
  }
  
  // Очищаем корзину после оформления
  cart = [];
  updateCartDisplay();
  
  if (tg && tg.showAlert) {
    tg.showAlert('Заказ отправлен менеджеру!');
    tg.close && tg.close();
  } else {
    alert('Заказ отправлен менеджеру!');
  }
}

// Инициализация при загрузке страницы
document.addEventListener('DOMContentLoaded', function() {
  // Обработчик изменения языка
  document.getElementById('language-select').addEventListener('change', function() {
    applyTranslations(this.value);
  });
  
  // Обработчик кнопки фильтров - исправлен
  const filtersButton = document.getElementById('filters-button');
  filtersButton.addEventListener('click', function(e) {
    e.preventDefault();
    e.stopPropagation();
    toggleFilters();
  });
  
  // Обработчик переключения темы
  document.getElementById('theme-toggle').addEventListener('click', function(e) {
    e.preventDefault();
    e.stopPropagation();
    toggleTheme();
  });
  
  // Обработчик корзины
  document.getElementById('cart-button').addEventListener('click', function(e) {
    e.preventDefault();
    e.stopPropagation();
    openScreen('cart');
  });
  
  // Закрытие фильтров при клике вне их
  document.addEventListener('click', function(e) {
    const filtersButton = document.getElementById('filters-button');
    const dropdown = document.getElementById('filters-dropdown');
    
    if (!filtersButton.contains(e.target)) {
      dropdown.classList.remove('show');
    }
  });
  
  // Предотвращение закрытия при клике внутри выпадающего меню
  document.getElementById('filters-dropdown').addEventListener('click', function(e) {
    e.stopPropagation();
  });
  
  // Обработчики фильтров
  document.getElementById('search-input').addEventListener('input', applyFilters);
  document.getElementById('price-filter').addEventListener('change', applyFilters);
  document.getElementById('size-filter').addEventListener('change', applyFilters);
  document.getElementById('brand-filter').addEventListener('change', applyFilters);
  
  // Инициализация корзины
  updateCartDisplay();
  
  // Применяем начальные переводы
  applyTranslations('ru');
  
  // Настройка Telegram Web App
  if (tg) {
    tg.ready && tg.ready();
    tg.MainButton && tg.MainButton.setText('Оформить заказ');
    tg.MainButton && tg.MainButton.hide();
  }
});
</script>
</body>
</html>

